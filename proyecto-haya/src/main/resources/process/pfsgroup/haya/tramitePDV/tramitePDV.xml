<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="urn:jbpm.org:jpdl-3.2"
	name="tramitePDV">

	<start-state name="inicio">
		<transition to="forkInicio" name="iniciarProceso"></transition>
	</start-state>
	
	<fork name="forkInicio">
		<transition to="P456_ObtenerAprobacionCN"></transition>
		<transition to="P456_ConfeccionarBorradorContratoAcreditado"></transition>
	</fork>	
	
	<start-state name="P456_ObtenerAprobacionCN">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ComunicacionAcreditadoCNDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_ComunicacionAcreditadoCNDecision" expression="#{P456_ComunicacionAcreditadoCNDecision}">
		<transition to="Fin" name="Si"></transition>
		<transition to="P456_ComunicacionAcreditadoCN" name="No"></transition>
	</decision>
	
	
	<start-state name="P456_ComunicacionAcreditadoCN">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ObtenerAprobacionCN" name="vueltaAtras"></transition>
		<transition to="P456_EnviarDesistirWFCN" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_EnviarDesistirWFCN">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ComunicacionAcreditadoCN" name="vueltaAtras"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_ConfeccionarBorradorContratoAcreditado">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ConfeccionarBorradorContratoAcreditadoDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_ConfeccionarBorradorContratoAcreditadoDecision" expression="#{P456_ConfeccionarBorradorContratoAcreditadoDecision}">
		<transition to="P456_ValidarBorradorContratoAJ" name="Si"></transition>
		<transition to="P456_EnvioBorradorContratoAcreditado" name="No"></transition>
	</decision>
	
	<start-state name="P456_ValidarBorradorContratoAJ">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ConfeccionarBorradorContratoAcreditado" name="vueltaAtras"></transition>
		<transition to="P456_ValidarBorradorContratoAJDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_ValidarBorradorContratoAJDecision" expression="#{P456_ValidarBorradorContratoAJDecision}">
		<transition to="P456_EnvioBorradorContratoAcreditado" name="Aprobada"></transition>
		<transition to="P456_ComunicacionAcreditadoAJ" name="Rechazada"></transition>
	</decision>
	
	<start-state name="P456_ComunicacionAcreditadoAJ">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ValidarBorradorContratoAJ" name="vueltaAtras"></transition>
		<transition to="P456_EnviarDesistirWFAJ" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_EnviarDesistirWFAJ">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ComunicacionAcreditadoAJ" name="vueltaAtras"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_EnvioBorradorContratoAcreditado">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_AcordarFechaFirma" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_AcordarFechaFirma">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_EnvioBorradorContratoAcreditado" name="vueltaAtras"></transition>
		<transition to="P456_AcordarFechaFirmaDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_AcordarFechaFirmaDecision" expression="#{P456_AcordarFechaFirmaDecision}">
		<transition to="P456_RevisarPropuesta" name="reconsiderar"></transition>
		<transition to="fork1" name="Aceptada"></transition>
		<transition to="P456_EnviarDesistirPreviaFirmaOperacion" name="Rechazada"></transition>
	</decision>
	
	<fork name="fork1">
		<transition to="P456_FirmarOperacion" name="firmarOperacion"></transition>
		<transition to="P456_PrepararContrato" name="prepararContrato"></transition>
	</fork>
	
	<start-state name="P456_RevisarPropuesta">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_AcordarFechaFirma" name="vueltaAtras"></transition>
		<transition to="P456_ElevarSareb" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_ElevarSareb">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_RevisarPropuesta" name="vueltaAtras"></transition>
		<transition to="P456_RegistrarResolucionSareb" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_RegistrarResolucionSareb">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ElevarSareb" name="vueltaAtras"></transition>
		<transition to="P456_RegistrarResolucionSarebDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_RegistrarResolucionSarebDecision" expression="#{P456_RegistrarResolucionSarebDecision}">
		<transition to="P456_ConfeccionarBorradorContratoAcreditado" name="Aceptada"></transition>
		<transition to="P456_ComunicacionAcreditadoSareb" name="Rechazada"></transition>
	</decision>
	
	<start-state name="P456_ComunicacionAcreditadoSareb">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_RegistrarResolucionSareb" name="vueltaAtras"></transition>
		<transition to="P456_EnviarDesistirWFSareb" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_EnviarDesistirWFSareb">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_ComunicacionAcreditadoSareb" name="vueltaAtras"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_EnviarDesistirPreviaFirmaOperacion">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_PrepararContrato">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_PrepararContratoDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_PrepararContratoDecision" expression="#{P456_PrepararContratoDecision}">
		<transition to="P456_ValidacionContratoAJ" name="Si"></transition>
		<transition to="P456_EnvioContratoAcreditado" name="No"></transition>
	</decision>
	
	<start-state name="P456_ValidacionContratoAJ">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_PrepararContrato" name="vueltaAtras"></transition>
		<transition to="P456_ValidacionContratoAJDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_ValidacionContratoAJDecision" expression="#{P456_ValidacionContratoAJDecision}">
		<transition to="P456_EnvioContratoAcreditado" name="Validado"></transition>
		<transition to="P456_PrepararContrato" name="NoValidado"></transition>
	</decision>
	
	<start-state name="P456_EnvioContratoAcreditado">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_FirmarOperacion">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_FirmarOperacionDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_FirmarOperacionDecision" expression="#{P456_FirmarOperacionDecision}">
		<transition to="P456_EnviarDesistirPreviaFirmaOperacion" name="Rechazada"></transition>
		<transition to="P456_VolcadoCondicionesResolucion" name="Aceptada"></transition>
	</decision>
	
	<start-state name="P456_VolcadoCondicionesResolucion">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_FirmarOperacion" name="vueltaAtras"></transition>
		<transition to="fork2" name="avanzaBPM"></transition>
	</start-state>
	
	<fork name="fork2">
		<transition to="P456_ObtenerDocumentacionOriginal" name="obtenerDocumentacionOriginal"></transition>
		<transition to="P456_InformarCierreSareb" name="informarCierreSareb"></transition>
		<transition to="P456_AnalisisEvolucionPDV" name="analisisEvolucionPDV"></transition>
	</fork>
	
	<start-state name="P456_ObtenerDocumentacionOriginal">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_InformarCierreSareb">
	<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>
	
	<start-state name="P456_AnalisisEvolucionPDV">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_AnalisisEvolucionPDVDecision" name="avanzaBPM"></transition>
	</start-state>
	
	<decision name="P456_AnalisisEvolucionPDVDecision" expression="#{P456_AnalisisEvolucionPDVDecision}">
		<transition to="Fin" name="Si"></transition>
		<transition to="P456_ComunicacionAcreditadoRenovacion" name="No"></transition>
	</decision>
	
	<start-state name="P456_ComunicacionAcreditadoRenovacion">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="Fin"></transition>
		<transition to="P456_AnalisisEvolucionPDV" name="vueltaAtras"></transition>
		<transition to="Fin" name="avanzaBPM"></transition>
	</start-state>

	<end-state name="Fin">
	  <event type="node-enter">
         <action name="miTarea" class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy" config-type="bean">
            <targetBean>endProcessActionHandler</targetBean>
         </action>
      </event>  
    </end-state>


</process-definition>
