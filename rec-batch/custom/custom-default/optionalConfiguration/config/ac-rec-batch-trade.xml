<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:si="http://www.springframework.org/schema/integration" xmlns:context="http://www.springframework.org/schema/context"
  xmlns:p="http://www.springframework.org/schema/p"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
                        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-1.0.xsd 
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
  default-merge="true" default-autowire="byName">

    <!-- Per Batch concurrecy handling
    <si:channel id="tradeFileInputChannel" />
    <bean id="tradeFileSourceGenerator" parent="batch.FolderFileSourceGenerator">
        <property name="inDir" value="${batch.trade.in}" />
        <property name="filePattern" value="${batch.trade.semaphore}" />
        <property name="period" value="${batch.trade.period}" />
        <property name="channel" value="tradeFileInputChannel" />
    </bean>
    Add "@MessageEndpoint(input = "tradeFileInputChannel")" & "@Handler" in TradeFileHandler
    -->
    
    <!-- Per Batch/Entity concurrecy handling
    <bean id="tradeFileSourceGenerator" parent="batch.FolderFileSourceGenerator">
        <property name="inDir" value="${batch.trade.in}" />
        <property name="filePattern" value="${batch.trade.semaphore}" />
        <property name="period" value="${batch.trade.period}" />
        <property name="channel" value="tradeFileInputChannel" />
        <property name="fileHandlerBeanName" value="tradeFileHandler" />
        <property name="fileHandlerMethodName" value="handle" />
        <property name="entityConcurrent" value="true" />
    </bean>
    <bean id="tradeFileHandler" class="es.capgemini.pfs.batch.trade.TradeFileHandler" scope="prototype"/>
    -->

    <!-- Defered Per Batchconcurrecy handling -->
   <!--
    <bean id="tradeFileSourceGenerator" parent="batch.FolderFileSourceGenerator">
        <property name="inDir" value="${batch.trade.in}" />
        <property name="filePattern" value="${batch.trade.semaphore}" />
        <property name="period" value="${batch.trade.period}" />
        <property name="channel" value="tradeFileInputChannel" />
        <property name="fileHandlerBeanName" value="tradeFileHandler" />
        <property name="fileHandlerMethodName" value="handle" />
        <property name="entityConcurrent" value="true" />
    </bean>
    <bean id="tradeFileHandler" class="es.capgemini.pfs.batch.trade.TradeFileHandler" scope="prototype">
        <property name="cronExpression" value="0 0/5 * ? * MON-FRI" />
        <property name="window" value="1" />
        <property name="channel" value="tradeFileInputChannel" />
    </bean>
-->
    <!--
        Reinsert files Subscriptor 
        <bean id="tradeQueueSubscriptorByFolderGenerator" parent="batch.QueueSubscriptorByFolderGenerator">
            <property name="inDir" value="${batch.trade.in}" /> 
            <property name="channel" value="tradeSecondInputChannel" /> 
            <property name="beanName" value="tradeSecondHandler" /> 
            <property name="methodName" value="handle" /> 
        </bean> 
        <bean id="tradeSecondHandler" class="es.capgemini.pfs.batch.trade.TradeReinsertFileHandler" scope="prototype" />
    -->
    
</beans>
