<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:p="http://www.springframework.org/schema/p"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"
  default-autowire="byName" default-merge="true">
  
  <bean id="procesoAntecedentesJob" parent="batch.simpleJob" scope="prototype">
  	<property name="steps">
  		<list>
  			<bean parent="batch.taskletStep" scope="prototype">
  				<property name="tasklet">
  					<bean class="es.capgemini.pfs.batch.antecedentes.ProcesoAntecedentesTasklet" scope="prototype">
  						<property name="bindings" value="fechaExtraccion=extractTime" />
  					</bean>
  				</property>
  			</bean>
  		</list>
  	</property>
  </bean>
  
  <bean id="movimientosDao" class="es.capgemini.pfs.batch.revisar.movimientos.dao.impl.MovimientosBatchDaoImpl">
    <property name="dataSource" ref="entityDataSource" />
    <property name="buscarDiasPosVencidaQuery">
      <bean parent="sql" p:key="movimientos.buscarDiasPosVencida" />
    </property>
    <property name="buscarDiasDescubiertoMovimientoQuery">
      <bean parent="sql" p:key="movimientos.diasDescubiertoMovimiento" />
    </property>
    <property name="buscarDiferenciaContratoQuery">
      <bean parent="sql" p:key="movimientos.buscarDiferenciaContrato" />
    </property>
    <property name="historificarMovimientosQuery">
      <bean parent="sql" p:key="movimientos.historificarMovimientosQuery" />
    </property>
    <property name="eliminarMovimientosHistorificadosQuery">
      <bean parent="sql" p:key="movimientos.eliminarMovimientosHistorificadosQuery" />
    </property>        
  </bean>
  
  <bean id="contratosDao" class="es.capgemini.pfs.batch.revisar.contratos.dao.impl.ContratosBatchDaoImpl">
    <property name="dataSource" ref="entityDataSource" />
    <property name="buscarFuturosClientesQuery">
      <bean parent="sql" p:key="contratos.buscarFuturosClientes" />
    </property>
    <property name="buscarFechaPosVencidaParaContratosQuery">
      <bean parent="sql" p:key="contratos.buscarFechaPosVencidaParaContratos" />
    </property>
    <!--  Querys de registro de recuperaciones  -->
    <property name="registrarRecuperacionQuery">
      <bean parent="sql" p:key="contratos.registrarRecuperacion" />
    </property>
    <property name="buscarSaldoProcedimientoAsuntoQuery">
      <bean parent="sql" p:key="contratos.buscarSaldoProcedimientoAsunto" />
    </property>
    <property name="buscarRecuperacionesQuery">
      <bean parent="sql" p:key="contratos.buscarRecuperaciones" />
    </property>
    <property name="buscarIdRecuperacionesQuery">
      <bean parent="sql" p:key="contratos.buscarIdRecuperaciones" />
    </property>
  </bean>  

  <bean id="antecedentesDao" class="es.capgemini.pfs.batch.revisar.antecedentes.dao.impl.AntecedentesBatchDaoImpl">
    <property name="dataSource" ref="entityDataSource" />
    <property name="buscarAntecedentePersonaQuery">
      <bean parent="sql" p:key="antecedentes.buscarAntecedente" />
    </property>
    <property name="buscarAntecendeteInternoQuery">
      <bean parent="sql" p:key="antecedentes.buscarAntecedenteInterno" />
    </property>
    <property name="buscarUltimoAntecedenteQuery">
      <bean parent="sql" p:key="antecedentes.buscarUltimoAntecedente" />
    </property>
    <property name="insertarNuevoAntecedenteQuery">
      <bean parent="sql" p:key="antecedentes.insertarNuevoAntecedente" />
    </property>
    <property name="updateAntecedenteEnPersonaQuery">
      <bean parent="sql" p:key="antecedentes.updateAntecedenteEnPersona" />
    </property>
    <property name="incrementarAntecedenteQuery">
      <bean parent="sql" p:key="antecedentes.incrementarAntecedente" />
    </property>
    <property name="insertarNuevoAntecedenteInternoQuery">
      <bean parent="sql" p:key="antecedentes.insertarNuevoAntecedenteInterno" />
    </property>
    <property name="updateAntecedenteInternoQuery">
      <bean parent="sql" p:key="antecedentes.updateAntecedenteInterno" />
    </property>
  </bean>    
  
  <bean id="clientesDao" class="es.capgemini.pfs.batch.revisar.clientes.dao.impl.ClientesBatchDaoImpl">
    <property name="dataSource" ref="entityDataSource" />
    <property name="buscarClienteQuery">
      <bean parent="sql" p:key="clientes.buscar" />
    </property>
    <property name="desactivarClienteQuery">
      <bean parent="sql" p:key="clientes.desactivar" />
    </property>
    <property name="borrarClienteContratoQuery">
      <bean parent="sql" p:key="clientes.borrarContrato" />
    </property>
    <property name="borrarClienteContratosQuery">
      <bean parent="sql" p:key="clientes.borrarContratos" />
    </property>
    <property name="buscarClientesActivosQuery">
      <bean parent="sql" p:key="clientes.buscarClientesActivos" />
    </property>
    <property name="buscarContratoPrincipalQuery">
      <bean parent="sql" p:key="clientes.buscarContratoPrincipal" />
    </property>
    <property name="buscarContratosQuery">
      <bean parent="sql" p:key="clientes.buscarContratosActivos" />
    </property>
    <property name="buscarArquetipoQuery">
      <bean parent="sql" p:key="clientes.buscarArquetipo" />
    </property>
    <property name="limpiarContratoPrincipalQuery">
      <bean parent="sql" p:key="clientes.limpiarContratoPrincipal" />
    </property>
    <property name="marcarContratoPrincipalQuery">
      <bean parent="sql" p:key="clientes.marcarContratoPrincipal" />
    </property>
    <property name="buscarPersonaClienteQuery">
      <bean parent="sql" p:key="clientes.buscarPersonaCliente" />
    </property>
    <property name="insertarNuevosContratosVencidosQuery">
      <bean parent="sql" p:key="clientes.insertarNuevosContratosVencidos" />
    </property>    
    <property name="insertarNuevosContratosQuery">
      <bean parent="sql" p:key="clientes.insertarNuevosContratos" />
    </property>    
    <property name="buscarContratosOrdenadoFechaPosVencidaQuery">
      <bean parent="sql" p:key="clientes.buscarContratosOrdenadoFechaPosVencida" />
    </property>    
  </bean>  
  
  <bean id="antecedentesBatchManager" class="es.capgemini.pfs.batch.revisar.antecedentes.AntecedentesBatchManager" />   
  
  <bean id="clientesBatchManager" class="es.capgemini.pfs.batch.revisar.clientes.ClientesBatchManager" />
  
  <bean id="movimientosBatchManager" class="es.capgemini.pfs.batch.revisar.movimientos.MovimientosBatchManager" />
  
  <bean id="contratosBatchManager" class="es.capgemini.pfs.batch.revisar.contratos.ContratosBatchManager"/>
  
  <bean id="personasBatchManager" class="es.capgemini.pfs.batch.revisar.personas.PersonasBatchManager" />
  
  <bean id="personasBatchDao" class="es.capgemini.pfs.batch.revisar.personas.dao.impl.PersonasBatchDaoImpl">
    <property name="dataSource" ref="entityDataSource" />
    <property name="updateFormulasPrecalculoPersonaQuery">
      <bean parent="sql" p:key="personas.precalculoFormulasQuery" />
    </property>
    <property name="updateFormulasPrecalculoGrupoQuery">
      <bean parent="sql" p:key="grupos.precalculoFormulasQuery" />
    </property>
    <property name="buscarArquetipoCalculadoQuery">
      <bean parent="sql" p:key="personas.buscarArquetipoCalculadoQuery" />
    </property>  
    <property name="buscarFuturosClientesSeguimientoQuery">
      <bean parent="sql" p:key="personas.buscarFuturosClientesSeguimientoQuery" />
    </property>      
    <property name="historificaPrepoliticasQuery">
      <bean parent="sql" p:key="personas.historificarPrepoliticasQuery" />
    </property>
    <property name="updateArquetiposPorCalculados">
      <bean parent="sql" p:key="personas.updateArquetiposPorCalculados" />
    </property>    
    <property name="buscarPersonasActivasQuery">
      <bean parent="sql" p:key="personas.buscarPersonasActivas" />
    </property>    
    <property name="buscarContratosQuery">
      <bean parent="sql" p:key="personas.buscarContratosActivos" />
    </property>        
  </bean>
</beans>
	