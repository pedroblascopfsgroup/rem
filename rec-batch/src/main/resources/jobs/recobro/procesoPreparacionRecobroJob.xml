<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:p="http://www.springframework.org/schema/p"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"
  default-autowire="byName" default-merge="true">
  
  <bean id="procesoPreparacionRecobroJob" parent="batch.simpleJob" scope="prototype">
    <!-- 
    <property name="transactional" value="true"/>
    <property name="transactionManager" ref="entityTransactionManager"/>
     -->  
    <property name="steps">
      <list>
		<bean parent="batch.taskletStep" scope="prototype">
			<property name="tasklet">
				<bean parent="batch.task.MultipleSqlScript" p:dataSource-ref="entityDataSource">
					<property name="scripts">
						<!-- Lista de scripts SQL ha ejecutar -->
						<list>
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.control.proceso.produccion" /></entry>
								<entry key="message" value="recobro.control.proceso.produccion" />
								<entry key="severidad" value="error"/>
							</map>
							<!-- COMPROBAMOS SI HAY ESQUEMAS PENDIENTES DE LIBERAR Y REALIZAMOS LOS CAMBOS CORRESPONDIENTES EN CASO AFIRMATIVO -->
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.gestion.esquemas" /></entry>
								<entry key="message" value="recobro.gestion.esquemas" />
								<entry key="severidad" value="error"/>
							</map>
							<!-- VOLVEMOS A GENERAR LA VISTA DE BATCH_RCF_ENTRADA -->
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_rcf_entrada" /></entry>
								<entry key="message" value="recobro.borrado.batch_rcf_entrada" />
								<entry key="severidad" value="error"/>
							</map>
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_rcf_entrada" /></entry>
								<entry key="message" value="recobro.creacion.batch_rcf_entrada" />
								<entry key="severidad" value="error"/>
							</map>
							<!-- 
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.carga.data_rule_engine_cnt_niv" /></entry>
								<entry key="message" value="recobro.carga.data_rule_engine_cnt_niv" />
								<entry key="severidad" value="error"/>
							</map>
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.carga.data_rule_engine_per_niv" /></entry>
								<entry key="message" value="recobro.carga.data_rule_engine_per_niv" />
								<entry key="severidad" value="error"/>
							</map>
							 -->
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.insert.data_rule_engine" /></entry>
								<entry key="message" value="recobro.creacion.data_rule_engine" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_cnt_per" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_cnt_per" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_cnt_per" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_cnt_per" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_cnt" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_cnt" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_cnt" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_cnt" />
								<entry key="severidad" value="error"/>
							</map>			
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_per" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_per" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_per" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_per" />
								<entry key="severidad" value="error"/>
							</map>															
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_cnt_exp" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_cnt_exp" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_cnt_exp" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_cnt_exp" />
								<entry key="severidad" value="error"/>
							</map>			
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_exp" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_exp" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_exp" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_exp" />
								<entry key="severidad" value="error"/>
							</map>		
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_cnt_info" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_cnt_info" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_cnt_info" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_cnt_info" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_per_exp" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_per_exp" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_per_exp" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_per_exp" />
								<entry key="severidad" value="error"/>
							</map>														
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_cli" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_cli" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_cli" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_cli" />
								<entry key="severidad" value="error"/>
							</map>	
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_exceptuados" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_exceptuados" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_exceptuados" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_exceptuados" />
								<entry key="severidad" value="error"/>
							</map>			
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_exp_manual" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_exp_manual" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_exp_manual" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_exp_manual" />
								<entry key="severidad" value="error"/>
							</map>					
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.borrado.batch_datos_gcl" /></entry>
								<entry key="message" value="recobro.borrado.batch_datos_gcl" />
								<entry key="severidad" value="error"/>
							</map>									
							<map>
								<entry key="sql"><bean parent="sql" p:key="recobro.creacion.batch_datos_gcl" /></entry>
								<entry key="message" value="recobro.creacion.batch_datos_gcl" />
								<entry key="severidad" value="error"/>
							</map>			
 						</list>
					</property>
				</bean>
			</property>
		</bean>
      </list>
    </property>
  </bean>
</beans>
	
