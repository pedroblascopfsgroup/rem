<?xml version="1.0"?>
<!-- VALORES PERMITIDOS EN EL CAMPO TYPE: DROP, CREATE, INSERT, UPDATE, COUNT-->
<sqls>
<!-- 0 PASO: ANALIZAMOS EL NUMERO DE CONTRATOS INSERTADOS EN LA TABLA TMP_REC_CNT_LIBRES_ARQ_REC_EXT -->
	<sql>
		<type>COUNT</type>
		<msg>Número de registros insertados en la tabla TMP_REC_CNT_LIBRES_ARQ_REC: </msg>
		<value>
			SELECT COUNT(*) FROM TMP_REC_CNT_LIBRES_ARQ_REC
		</value>
		<expected>10</expected>
	</sql>
<!-- 1 PASO: ANALIZAMOS EL NUMERO DE CONTRATOS INSERTADOS EN LA TABLA TMP_REC_CNT_LIBRES_ARQ_REC_EXT -->
	<sql>
		<type>COUNT</type>
		<msg>Número de registros insertados en la tabla TMP_REC_CNT_LIBRES_ARQ_REC_EXT: </msg>
		<value>
			SELECT COUNT(*) FROM TMP_REC_CNT_LIBRES_ARQ_REC_EXT
		</value>
		<expected>10</expected>
	</sql>
<!-- 2 PASO: CREAMOS LA TABLA DE VALIDACIÓN -->
	<sql> <type>CREATE</type> <value>CREATE TABLE TMP_VALIDACION (EXP_ID NUMBER(16), CNT_ID NUMBER(16), PER_ID NUMBER(16), ARQ_ID NUMBER(16), CEX_PASE NUMBER(16))</value> <msg>Tabla TMP_VALIDACION creada correctamente.</msg></sql>
<!-- 3 PASO: INSERTAMOS EN LA TABLA DE VALIDACIÓN -->	
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2294183,1110248,6,1)</value> <msg>Insertado registro nº 1 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2247147,1110248,6,0)</value> <msg>Insertado registro nº 2 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2390248,1110248,6,0)</value> <msg>Insertado registro nº 3 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2294183,1110249,4,0)</value> <msg>Insertado registro nº 4 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2247147,1102073,5,0)</value> <msg>Insertado registro nº 5 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2257120,1110249,4,0)</value> <msg>Insertado registro nº 6 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(1,2240455,1102073,5,0)</value> <msg>Insertado registro nº 7 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(2,2586324,991701,3,1)</value>  <msg>Insertado registro nº 8 en TMP_VALIDACION: </msg></sql>
	<sql> <type>INSERT</type> <value>INSERT INTO TMP_VALIDACION VALUES(2,2585142,991701,3,0)</value>  <msg>Insertado registro nº 9 en TMP_VALIDACION: </msg></sql>	
<!-- 4 PASO: COMPARAMOS QUE LOS REGISTROS SEAN LOS ESPERADOS -->
	<sql>
		<type>CREATE</type>
		<value>
			CREATE TABLE TMP_COMPARE AS
			SELECT 
	    		(SELECT COUNT(*) FROM TMP_VALIDACION) EXPECTED
	    		,(SELECT COUNT(*) FROM BATCH_DATOS_SALIDA ) ACTUAL
			FROM DUAL
		</value>
		<msg>Tabla TMP_COMPARE creada correctamente.</msg>
	</sql>
	<sql>
		<type>COUNT</type>
		<msg>No se han generado el número de contratos esperado</msg>
		<value>
			SELECT COUNT(*) FROM (
			SELECT * FROM TMP_COMPARE WHERE EXPECTED != ACTUAL)
		</value>
		<expected>0</expected>
	</sql>	
	<sql>
		<type>COUNT</type>
		<msg>La tabla BATCH_DATOS_SALIDA está vacía</msg>
		<value>
			SELECT COUNT(*) FROM (
				SELECT COUNT(*) N FROM BATCH_DATOS_SALIDA
			)WHERE N = 0
		</value>
		<expected>0</expected>
	</sql>
</sqls>