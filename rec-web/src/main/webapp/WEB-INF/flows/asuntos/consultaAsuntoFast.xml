<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
    
	<input name="id" type="java.lang.Long"/>
   <input name="nombreTab" type="java.lang.String"/>
   
	<!-- renderiza el formulario -->
    <end-state id="consultaAsunto" view="entidad/asunto/asuntoJSON" >
	      <on-entry>
	    	<evaluate expression="requestParameters.aceptacion" result="flowScope.aceptacion"/>
	    	<evaluate expression="requestParameters.acuerdos" result="flowScope.acuerdos"/>
	    	<evaluate expression="true" result="flowScope.readOnly"/>
	    	<evaluate expression="executor.execute('asuntosManager.get',id)" result="flowScope.asunto" />
	    	<evaluate expression="executor.execute('asuntosManager.puedoDevolverAsunto',id)" result="flowScope.puedoDevolver" />
	    	<evaluate expression="executor.execute('asuntosManager.puedeTomarAccionAsunto',id)" result="flowScope.puedeTomarAccion" />
	    	<evaluate expression="executor.execute('asuntosManager.buscarTareaPendiente',id)" result="flowScope.tareaPendiente" />
	    	<evaluate expression="executor.execute('asuntosManager.esGestor',id)" result="flowScope.esGestor" />
	    	<evaluate expression="executor.execute('asuntosManager.esSupervisor',id)" result="flowScope.esSupervisor" />
	    	<evaluate expression="executor.execute('usuarioManager.getUsuarioLogado')" result="flowScope.usuario" />
                <evaluate expression="executor.execute('asuntosManager.esSupervisorOriginal',id)" result="flowScope.esSupervisorOriginal" />
                <evaluate expression="executor.execute('asuntosManager.esSupervisorTemporal',id)" result="flowScope.esSupervisorTemporal" />
                <evaluate expression="executor.execute('concursoManager.dameNumDeProcsFaseComun',id)" result="flowScope.procedimientosConcursales" />
                <evaluate expression="executor.execute('core.asunto.puedeVerTabSubasta',id)" result="flowScope.puedeVerTabSubasta" />
                <evaluate expression="executor.execute('core.asunto.puedeVerTabAdjudicados',id)" result="flowScope.puedeVerTabAdjudicados" />
                <evaluate expression="executor.execute('core.asunto.contieneProvisiones',id)" result="flowScope.provision"/>
                <evaluate expression="executor.execute('es.pfsgroup.recovery.ext.api.asunto.esTitulizada',id)" result="flowScope.titulizada" />
                <evaluate expression="executor.execute('es.pfsgroup.recovery.ext.api.asunto.getFondo',id)" result="flowScope.fondo" />
                <evaluate expression="executor.execute('asuntosManager.getMsgErrorEnvioCDDCabecera',id)" result="flowScope.msgErrorEnvioCDD" />
                <evaluate expression="executor.execute('MEJAsuntosManager.puedeFinalizarAsunto',id)" result="flowScope.puedeFinalizarAsunto" /> 
                <evaluate expression="executor.execute('AsuntoAcuerdoManager.asuntoOrigen',id)" result="flowScope.asuntoOrigen" />
                <evaluate expression="executor.execute('AsuntoAcuerdoManager.expedienteOrigen',id)" result="flowScope.expedienteOrigen" />
                <evaluate expression="executor.execute('AsuntoAcuerdoManager.esAsuntoAcuerdo',id)" result="flowScope.esAsuntoAcuerdo" />
	    </on-entry>
    </end-state> 	
    
</flow>
