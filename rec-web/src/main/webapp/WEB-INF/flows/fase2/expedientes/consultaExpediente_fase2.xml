<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="dto" class="es.capgemini.pfs.expediente.model.Expediente"/>
    <var name="dtoTarea" class="es.capgemini.pfs.tareaNotificacion.dto.DtoTareaNotificaciones"/>
	<var name="dtoBuscarTareaNotificacion" class="es.capgemini.pfs.tareaNotificacion.dto.DtoBuscarTareaNotificacion" />
	<input name="id" type="java.lang.Long"/>
	<input name="tienePerfilGestor" type="java.lang.Boolean"/>
	<input name="tienePerfilGestor" type="java.lang.Boolean"/>
	
	<!-- renderiza el la pÃ¡gina -->
    <view-state id="buscaCliente" view="fase2/expedientes/consultaExpediente">
    	<on-render>
   			<evaluate expression="executor.execute('expedienteManager.getExpediente', id)" result="flowScope.expediente"/>
   			<evaluate expression="executor.execute('tareaNotificacionManager.buscarTareaActualExpediente', id)" result="flowScope.tarea"/>

   			<evaluate expression="executor.execute('tareaNotificacionManager.buscarComunicacionesExpediente',id)" result="flowScope.tareaPendiente"/>

   			<evaluate expression="executor.execute('expedienteManager.puedeMostrarSolapaDecisionComite', id)" result="flowScope.puedeMostrar"/>
   			<evaluate expression="executor.execute('tareaNotificacionManager.obtenerProrrogaExpediente',id)" result="flowScope.prorrogaPendiente"/>
   			<evaluate expression="executor.execute('tareaNotificacionManager.obtenerSolicitudCancelacionExpediente',id)" result="flowScope.solicitudCancelacion"/>
   		</on-render>	
    </view-state> 	
        
</flow>
