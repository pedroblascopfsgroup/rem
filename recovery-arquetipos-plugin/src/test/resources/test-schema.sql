CREATE TABLE ENTIDADCONFIG  (
   ID                   INTEGER                      IDENTITY,
   ENTIDAD_ID           INTEGER,
   DATAKEY              VARCHAR,
   DATAVALUE            VARCHAR,
   CONSTRAINT PK_ENTIDADCONFIG PRIMARY KEY (ID)
);


CREATE TABLE ENTIDAD  (
   ID                   INTEGER                     IDENTITY,
   DESCRIPCION          VARCHAR,
   USUARIOCREAR         VARCHAR                    NOT NULL,
   FECHACREAR           DATETIME                       NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER                    DEFAULT 0 NOT NULL,
   CONSTRAINT PK_ENTIDAD PRIMARY KEY (ID)
);


CREATE TABLE USU_USUARIOS
(
  USU_ID                   NUMBER(16)           IDENTITY,
  ENTIDAD_ID               NUMBER(16),
  USU_USERNAME             VARCHAR2(50 CHAR)    NOT NULL,
  USU_PASSWORD             VARCHAR2(50 CHAR),
  USU_NOMBRE               VARCHAR2(50 CHAR),
  USU_APELLIDO1            VARCHAR2(50 CHAR),
  USU_APELLIDO2            VARCHAR2(50 CHAR),
  USU_TELEFONO             VARCHAR2(10 CHAR),
  USU_MAIL                 VARCHAR2(50 CHAR),
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL,
  USU_EXTERNO              NUMBER(1)            DEFAULT 0,
  USU_FECHA_VIGENCIA_PASS  DATE                 DEFAULT SYSDATE               NOT NULL,
  CONSTRAINT PK_USU_USUARIOS PRIMARY KEY (USU_ID)
);


  
CREATE TABLE DD_TDE_TIPO_DESPACHO
(
  DD_TDE_ID                 NUMBER(16)          NOT NULL,
  DD_TDE_CODIGO             VARCHAR2(50 CHAR)   NOT NULL,
  DD_TDE_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TDE_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TDE_TIPO_DESPACHO PRIMARY KEY (DD_TDE_ID)
);
CREATE SEQUENCE S_DD_TDE_TIPO_DESPACHO
  AS INTEGER
  START WITH 1
  INCREMENT BY 1;

CREATE TABLE DES_DESPACHO_EXTERNO
(
  DES_ID                NUMBER(16)              IDENTITY,
  DES_DESPACHO          VARCHAR2(100 CHAR),
  DES_TIPO_VIA          VARCHAR2(100 CHAR),
  DES_DOMICILIO         VARCHAR2(100 CHAR),
  DES_DOMICILIO_PLAZA   VARCHAR2(100 CHAR),
  DES_CODIGO_POSTAL     NUMBER(5),
  DES_PERSONA_CONTACTO  VARCHAR2(100 CHAR),
  DES_TELEFONO2         VARCHAR2(100 CHAR),
  DES_TELEFONO1         VARCHAR2(100 CHAR),
  VERSION               INTEGER                 DEFAULT 0                     NOT NULL,
  USUARIOCREAR          VARCHAR2(10 CHAR)       NOT NULL,
  FECHACREAR            TIMESTAMP(6)            NOT NULL,
  USUARIOMODIFICAR      VARCHAR2(10 CHAR),
  FECHAMODIFICAR        TIMESTAMP(6),
  USUARIOBORRAR         VARCHAR2(10 CHAR),
  FECHABORRAR           TIMESTAMP(6),
  BORRADO               NUMBER(1)               DEFAULT 0                     NOT NULL,
  ZON_ID                NUMBER(16),
  DD_TDE_ID             NUMBER(16),
  CONSTRAINT PK_DES_DESPACHO_EXTERNO PRIMARY KEY (DES_ID)
);


CREATE TABLE USD_USUARIOS_DESPACHOS (
    USD_ID              INTEGER                    IDENTITY,
    USU_ID              INTEGER                   NOT NULL,
    DES_ID              INTEGER                    NOT NULL,
    USD_GESTOR_DEFECTO  INTEGER                     NOT NULL,
    USD_SUPERVISOR      INTEGER                     NOT NULL,
    VERSION             INTEGER              DEFAULT 0   NOT NULL,
    USUARIOCREAR        VARCHAR               NOT NULL,
    FECHACREAR          DATETIME                   NOT NULL,
    USUARIOMODIFICAR    VARCHAR,
    FECHAMODIFICAR      DATETIME,
    USUARIOBORRAR       VARCHAR,
    FECHABORRAR         DATETIME,
    BORRADO             INTEGER         DEFAULT 0   NOT NULL,
    CONSTRAINT PK_USD_USUARIOS_DESPACHOS PRIMARY KEY (USD_ID)
);


CREATE TABLE FUN_FUNCIONES  (
   FUN_ID               INTEGER                      IDENTITY,
   FUN_DESCRIPCION_LARGA VARCHAR,
   FUN_DESCRIPCION      VARCHAR,
   VERSION              INTEGER                        DEFAULT 0 NOT NULL,
   USUARIOCREAR         VARCHAR                    NOT NULL,
   FECHACREAR           DATETIME                       NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER                    DEFAULT 0 NOT NULL,
   CONSTRAINT PK_FUN_FUNCIONES PRIMARY KEY (FUN_ID)
);


CREATE TABLE PEF_PERFILES  (
   PEF_ID               INTEGER              IDENTITY,
   PEF_CODIGO           VARCHAR      NOT NULL,
   PEF_DESCRIPCION      VARCHAR,
   PEF_DESCRIPCION_LARGA VARCHAR,
   VERSION              INTEGER                 DEFAULT 0 NOT NULL,
   USUARIOCREAR         VARCHAR       NOT NULL,
   FECHACREAR           DATETIME               NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER             DEFAULT 0 NOT NULL,
   CONSTRAINT PK_PEF_PERFILES PRIMARY KEY (PEF_ID)
);


CREATE TABLE ZON_PEF_USU
(
  ZON_ID            NUMBER(16)                  NOT NULL,
  PEF_ID            NUMBER(16)                  NOT NULL,
  USU_ID            NUMBER(16)                  NOT NULL,
  ZPU_ID            NUMBER(16)                  IDENTITY,
  VERSION           INTEGER                     DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_ZON_PEF_USU PRIMARY KEY (ZPU_ID)
);

CREATE TABLE FUN_PEF
(
  FUN_ID            NUMBER(16)                  NOT NULL,
  PEF_ID            NUMBER(16)                  NOT NULL,
  FP_ID             NUMBER(16)                  IDENTITY,
  VERSION           NUMBER                      DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_FUN_PEF PRIMARY KEY (FP_ID)
);

  
  
CREATE TABLE ARQ_ARQUETIPOS
(
  ARQ_ID             NUMBER(16)                 IDENTITY,
  ITI_ID             NUMBER(16),
  ARQ_PRIORIDAD      NUMBER(16),
  ARQ_NOMBRE         VARCHAR2(100 CHAR),
  VERSION            INTEGER                    DEFAULT 0                     NOT NULL,
  USUARIOCREAR       VARCHAR2(10 CHAR)          NOT NULL,
  FECHACREAR         TIMESTAMP(6)               NOT NULL,
  USUARIOMODIFICAR   VARCHAR2(10 CHAR),
  FECHAMODIFICAR     TIMESTAMP(6),
  USUARIOBORRAR      VARCHAR2(10 CHAR),
  FECHABORRAR        TIMESTAMP(6),
  BORRADO            NUMBER(1)                  DEFAULT 0                     NOT NULL,
  ARQ_NIVEL          NUMBER(4)                  DEFAULT 0                     NOT NULL,
  ARQ_GESTION        NUMBER(1)                  DEFAULT 1                     NOT NULL,
  ARQ_PLAZO_DISPARO  NUMBER(16)                 DEFAULT 0,
  DD_TSN_ID          NUMBER(16),
  RD_ID              NUMBER(16),
  CONSTRAINT PK_ARQ_ARQUETIPOS PRIMARY KEY (ARQ_ID)
);

CREATE TABLE DD_TSN_TIPO_SALTO_NIVEL
(
  DD_TSN_ID                 NUMBER(16)          IDENTITY,
  DD_TSN_CODIGO             VARCHAR2(10 CHAR)   NOT NULL,
  DD_TSN_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TSN_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TSN_TIPO_SALTO_NIVEL PRIMARY KEY (DD_TSN_ID)
)

CREATE TABLE LIA_LISTA_ARQUETIPOS
(
  LIA_ID             NUMBER(16)                 IDENTITY,
  ITI_ID             NUMBER(16),
  LIA_PRIORIDAD      NUMBER(16),
  LIA_NOMBRE         VARCHAR2(100 CHAR),
  VERSION            INTEGER                    DEFAULT 0                     NOT NULL,
  USUARIOCREAR       VARCHAR2(10 CHAR)          NOT NULL,
  FECHACREAR         TIMESTAMP(6)               NOT NULL,
  USUARIOMODIFICAR   VARCHAR2(10 CHAR),
  FECHAMODIFICAR     TIMESTAMP(6),
  USUARIOBORRAR      VARCHAR2(10 CHAR),
  FECHABORRAR        TIMESTAMP(6),
  BORRADO            NUMBER(1)                  DEFAULT 0                     NOT NULL,
  LIA_NIVEL          NUMBER(4)                  DEFAULT 0                     NOT NULL,
  LIA_GESTION        NUMBER(1)                  DEFAULT 1                     NOT NULL,
  LIA_PLAZO_DISPARO  NUMBER(16)                 DEFAULT 0,
  DD_TSN_ID          NUMBER(16),
  RD_ID              NUMBER(16),
  CONSTRAINT PK_LIA_LISTA_ARQUETIPOS PRIMARY KEY (LIA_ID)
)

  
CREATE TABLE RULE_DEFINITION
(
  RD_ID          NUMBER(16)                     IDENTITY,
  RD_NAME        VARCHAR2(250 CHAR)             NOT NULL,
  RD_DEFINITION  VARCHAR2(4000 CHAR)            NOT NULL,
  CONSTRAINT PK_RULE_DEFINITION PRIMARY KEY (RD_ID)
);

CREATE TABLE DD_ESM_ESTADOS_MODELO
(
  DD_ESM_ID                 NUMBER(16)          IDENTITY,
  DD_ESM_CODIGO             VARCHAR2(20 BYTE)   NOT NULL,
  DD_ESM_DESCRIPCION        VARCHAR2(50 BYTE),
  DD_ESM_DESCRIPCION_LARGA  VARCHAR2(250 BYTE),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 BYTE)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 BYTE),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 BYTE),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_ESM_ESTADOS_MODELO PRIMARY KEY (DD_ESM_ID)
);

CREATE TABLE MOA_MODELOS_ARQ  (
   MOA_ID		 			NUMBER(16)			IDENTITY,
   MOA_NOMBRE           	VARCHAR2(10 BYTE)   NOT NULL,
   MOA_DESCRIPCION          VARCHAR2(50 BYTE)   NOT NULL,
   DD_ESM_ID				NUMBER(16)	 DEFAULT 1		NOT NULL,
   MOA_OBSERVACIONES		VARCHAR2(100),		
   VERSION                  INTEGER         DEFAULT 0  	NOT NULL,
   USUARIOCREAR             VARCHAR2(10 BYTE)   				NOT NULL,
   FECHACREAR               TIMESTAMP(6)        				NOT NULL,
   USUARIOMODIFICAR         VARCHAR2(10 BYTE),
   FECHAMODIFICAR           TIMESTAMP(6),
   USUARIOBORRAR            VARCHAR2(10 BYTE),
   FECHABORRAR              TIMESTAMP(6),
   BORRADO                  NUMBER(1)       DEFAULT 0		NOT NULL,   
   CONSTRAINT MOA_MODELOS_ARQ PRIMARY KEY (MOA_ID)
);


CREATE TABLE MRA_REL_MODELO_ARQ  (
   MRA_ID		 			NUMBER(16)			IDENTITY,
   MOA_ID		           	NUMBER(16)			NOT NULL,
   LIA_ID					NUMBER(16)			NOT NULL,
   MRA_NIVEL 		        NUMBER(4)                  DEFAULT 0                     NOT NULL,
   ITI_ID					NUMBER(16),			
   MRA_PRIORIDAD			NUMBER(16)			NOT NULL,
   VERSION                  INTEGER         DEFAULT 0  	NOT NULL,
   USUARIOCREAR             VARCHAR2(10 BYTE)   				NOT NULL,
   FECHACREAR               TIMESTAMP(6)        				NOT NULL,
   USUARIOMODIFICAR         VARCHAR2(10 BYTE),
   FECHAMODIFICAR           TIMESTAMP(6),
   USUARIOBORRAR            VARCHAR2(10 BYTE),
   FECHABORRAR              TIMESTAMP(6),
   BORRADO                  NUMBER(1)       DEFAULT 0		NOT NULL,   
   CONSTRAINT PK_MRA_REL_MODELO_ARQ PRIMARY KEY (MRA_ID)
);	



