<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
	
	<input name="id" type="java.lang.Long"/>

	<end-state id="listado" view="plugin/config/despachoExterno/consultarDespachoExterno">
		<secured attributes="ROLE_ADMIN" match="any" />
		<on-entry>
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getDespachoExterno',id)" result="flowScope.despacho"/>
			<evaluate expression="executor.execute('admTipoDespachoExternoManager.getList')"
				result="flowScope.tiposDespachos" />
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getGestoresDespacho',id)" result="flowScope.gestores" />
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getSupervisoresDespacho',id)" result="flowScope.supervisores" />
			<evaluate expression="executor.execute('ADMDespachoExternoManager.dameGestorDefecto', id)" result="flowScope.gestorDefecto" />
			<evaluate expression="executor.execute('ADMUsuarioManager.getUsuariosNoExternos')" result="flowScope.totalSupervisores" />
			<evaluate expression="executor.execute('ADMUsuarioManager.getUsuariosExternos')" result="flowScope.totalGestores" />
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getTipoVia')"	result="flowScope.ddTipoVia" />
			<evaluate expression="executor.execute('plugin.recovery.coreextension.api.getListTipoGestor', despacho.tipoDespacho.codigo)" result="flowScope.tiposGestorPropiedad" />
		</on-entry>
	</end-state>
</flow>