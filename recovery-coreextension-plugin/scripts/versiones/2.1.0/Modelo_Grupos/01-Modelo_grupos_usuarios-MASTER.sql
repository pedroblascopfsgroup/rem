--
-- COREEXTENSION 2.1.0
-- Modelo grupos de usuarios
-- Modificaciones MASTER
-- 

alter table usu_usuarios add (usu_grupo number(1) default 0 not null);


CREATE SEQUENCE S_GRU_GRUPOS_USUARIOS START WITH 1 INCREMENT BY 1;

CREATE TABLE GRU_GRUPOS_USUARIOS
(
  GRU_ID                   NUMBER(16)           NOT NULL,
  USU_ID_GRUPO             NUMBER(16)           NOT NULL,
  USU_ID_USUARIO           NUMBER(16)           NOT NULL,
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL
);


CREATE UNIQUE INDEX PK_GRU_GRUPOS_USUARIOS ON GRU_GRUPOS_USUARIOS (GRU_ID);


ALTER TABLE GRU_GRUPOS_USUARIOS ADD (
  CONSTRAINT PK_GRU_GRUPOS_USUARIOS PRIMARY KEY (GRU_ID)
  ,CONSTRAINT FK_GRU_USU_ID_GRUPO FOREIGN KEY (USU_ID_GRUPO) REFERENCES USU_USUARIOS (USU_ID)
  ,CONSTRAINT FK_GRU_USU_ID_USUARIO FOREIGN KEY (USU_ID_USUARIO) REFERENCES USU_USUARIOS (USU_ID) 
);
