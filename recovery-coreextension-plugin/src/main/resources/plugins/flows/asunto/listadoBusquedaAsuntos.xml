<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
    
    
	<action-state id="buscaPorCodigo">
		<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.api.asunto.modeloMultiGestor')" result="flowScope.multiGestor" />
		<transition to="decisionMultigestor"/>
	</action-state>
    
	<decision-state id="decisionMultigestor">
		<if test="multiGestor" then="listadoMultiGestor" else="listadoMonogestor"/>
	</decision-state>
    
	
	<!-- renderiza el formulario -->
	<end-state id="listadoMonogestor" view="plugin/coreextension/asunto/listadoBusquedaAsuntos" >
		<on-entry>
			<evaluate expression="executor.execute('usuarioManager.getUsuarioLogado')" result="flowScope.usuario"/>
			<evaluate expression="executor.execute('despachoExternoManager.getDespachosExternos')" result="flowScope.despachos" />
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDEstadoAsunto')" result="flowScope.estados"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDTiposAsunto')" result="flowScope.tipoAsunto"/>
			<evaluate expression="executor.execute('procedimientoManager.getEstadosProcedimientos')" result="flowScope.estadosAnalisis" />
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDCausaDecisionFinalizar')" result="flowScope.decisionesFinalizar"/>
			<evaluate expression="executor.execute('zonaManager.getNiveles')" result="flowScope.niveles" />
			<evaluate expression="executor.execute('usuarioManager.getZonasUsuarioLogado')" result="flowScope.zonas" />
			<evaluate expression="executor.execute('tipoProcedimientoManager.getTipoProcedimientos')" result="flowScope.tipoProcedimientos" />
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getTabs')" result="flowScope.tabs"/>
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getButtonsAsuntoLeft')" result="flowScope.buttonsLeft"/>
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getButtonsAsuntoRight')" result="flowScope.buttonsRight"/>
		</on-entry>
	</end-state> 
    
	<end-state id="listadoMultiGestor" view="plugin/coreextension/asunto/listadoBusquedaAsuntosMultigestorDinamico" >
		<on-entry>
			<evaluate expression="executor.execute('usuarioManager.getUsuarioLogado')" result="flowScope.usuario"/>
			<!--  <evaluate expression="executor.execute('despachoExternoManager.getDespachosExternos')" result="flowScope.despachos" />-->
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDGestionAsunto')" result="flowScope.gestiones"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDPropiedadAsunto')" result="flowScope.propiedades"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDEstadoAsunto')" result="flowScope.estados"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDTiposAsunto')" result="flowScope.tipoAsunto"/>
			<!--  <evaluate expression="executor.execute('dictionaryManager.getList', 'EXTDDTipoGestor')" result="flowScope.tiposGestor"/>-->
			<evaluate expression="executor.execute('procedimientoManager.getEstadosProcedimientos')" result="flowScope.estadosAnalisis" />
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDCausaDecisionFinalizar')" result="flowScope.decisionesFinalizar"/>
			<evaluate expression="executor.execute('zonaManager.getNiveles')" result="flowScope.niveles" />
			<evaluate expression="executor.execute('usuarioManager.getZonasUsuarioLogado')" result="flowScope.zonas" />
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DDSiNo')" result="flowScope.sino" />
			<evaluate expression="executor.execute('tipoProcedimientoManager.getTipoProcedimientos')" result="flowScope.tipoProcedimientos" />
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getTabs')" result="flowScope.tabs"/>
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getButtonsAsuntoLeft')" result="flowScope.buttonsLeft"/>
			<evaluate expression="executor.execute('es.pfsgroup.recovery.ext.impl.asunto.web.getButtonsAsuntoRight')" result="flowScope.buttonsRight"/>
			<evaluate expression="executor.execute('ADMDiccionariosManager.getSiNo')" result="flowScope.ddSiNo" />	
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getDDProvincias')" result="flowScope.listaProvincias" />
			<evaluate expression="executor.execute('ADMDespachoExternoManager.getDDTipoDocumento')" result="flowScope.tiposDocumentos" />
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DespachoContratoVigor')" result="flowScope.contratoDict"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DespachoCodEstado')" result="flowScope.codEstAseDict"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DespachoRelEntidad')" result="flowScope.relacionEntidadDict"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DespachoIvaDes')" result="flowScope.impuestoDict"/>
			<evaluate expression="executor.execute('dictionaryManager.getList', 'DespachoClasiPerfil')" result="flowScope.perfilDict"/>
		</on-entry>
	</end-state> 
    
</flow>