CREATE TABLE ENTIDADCONFIG  (
   ID                   INTEGER                      IDENTITY,
   ENTIDAD_ID           INTEGER,
   DATAKEY              VARCHAR,
   DATAVALUE            VARCHAR,
   CONSTRAINT PK_ENTIDADCONFIG PRIMARY KEY (ID)
);


CREATE TABLE ENTIDAD  (
   ID                   INTEGER                     IDENTITY,
   DESCRIPCION          VARCHAR,
   USUARIOCREAR         VARCHAR                    NOT NULL,
   FECHACREAR           DATETIME                       NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER                    DEFAULT 0 NOT NULL,
   CONSTRAINT PK_ENTIDAD PRIMARY KEY (ID)
);


CREATE TABLE USU_USUARIOS
(
  USU_ID                   NUMBER(16)           IDENTITY,
  ENTIDAD_ID               NUMBER(16),
  USU_USERNAME             VARCHAR2(50 CHAR)    NOT NULL,
  USU_PASSWORD             VARCHAR2(50 CHAR),
  USU_NOMBRE               VARCHAR2(50 CHAR),
  USU_APELLIDO1            VARCHAR2(50 CHAR),
  USU_APELLIDO2            VARCHAR2(50 CHAR),
  USU_TELEFONO             VARCHAR2(10 CHAR),
  USU_MAIL                 VARCHAR2(50 CHAR),
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL,
  USU_EXTERNO              NUMBER(1)            DEFAULT 0,
  USU_FECHA_VIGENCIA_PASS  DATE                 DEFAULT SYSDATE               NOT NULL,
  CONSTRAINT PK_USU_USUARIOS PRIMARY KEY (USU_ID)
);


  
CREATE TABLE DD_TDE_TIPO_DESPACHO
(
  DD_TDE_ID                 NUMBER(16)          NOT NULL,
  DD_TDE_CODIGO             VARCHAR2(50 CHAR)   NOT NULL,
  DD_TDE_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TDE_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TDE_TIPO_DESPACHO PRIMARY KEY (DD_TDE_ID)
);
CREATE SEQUENCE S_DD_TDE_TIPO_DESPACHO
  AS INTEGER
  START WITH 1
  INCREMENT BY 1;

CREATE TABLE DES_DESPACHO_EXTERNO
(
  DES_ID                NUMBER(16)              IDENTITY,
  DES_DESPACHO          VARCHAR2(100 CHAR),
  DES_TIPO_VIA          VARCHAR2(100 CHAR),
  DES_DOMICILIO         VARCHAR2(100 CHAR),
  DES_DOMICILIO_PLAZA   VARCHAR2(100 CHAR),
  DES_CODIGO_POSTAL     NUMBER(5),
  DES_PERSONA_CONTACTO  VARCHAR2(100 CHAR),
  DES_TELEFONO2         VARCHAR2(100 CHAR),
  DES_TELEFONO1         VARCHAR2(100 CHAR),
  VERSION               INTEGER                 DEFAULT 0                     NOT NULL,
  USUARIOCREAR          VARCHAR2(10 CHAR)       NOT NULL,
  FECHACREAR            TIMESTAMP(6)            NOT NULL,
  USUARIOMODIFICAR      VARCHAR2(10 CHAR),
  FECHAMODIFICAR        TIMESTAMP(6),
  USUARIOBORRAR         VARCHAR2(10 CHAR),
  FECHABORRAR           TIMESTAMP(6),
  BORRADO               NUMBER(1)               DEFAULT 0                     NOT NULL,
  ZON_ID                NUMBER(16),
  DD_TDE_ID             NUMBER(16),
  CONSTRAINT PK_DES_DESPACHO_EXTERNO PRIMARY KEY (DES_ID)
);


CREATE TABLE USD_USUARIOS_DESPACHOS (
    USD_ID              INTEGER                    IDENTITY,
    USU_ID              INTEGER                   NOT NULL,
    DES_ID              INTEGER                    NOT NULL,
    USD_GESTOR_DEFECTO  INTEGER                     NOT NULL,
    USD_SUPERVISOR      INTEGER                     NOT NULL,
    VERSION             INTEGER              DEFAULT 0   NOT NULL,
    USUARIOCREAR        VARCHAR               NOT NULL,
    FECHACREAR          DATETIME                   NOT NULL,
    USUARIOMODIFICAR    VARCHAR,
    FECHAMODIFICAR      DATETIME,
    USUARIOBORRAR       VARCHAR,
    FECHABORRAR         DATETIME,
    BORRADO             INTEGER         DEFAULT 0   NOT NULL,
    CONSTRAINT PK_USD_USUARIOS_DESPACHOS PRIMARY KEY (USD_ID)
);


CREATE TABLE FUN_FUNCIONES  (
   FUN_ID               INTEGER                      IDENTITY,
   FUN_DESCRIPCION_LARGA VARCHAR,
   FUN_DESCRIPCION      VARCHAR,
   VERSION              INTEGER                        DEFAULT 0 NOT NULL,
   USUARIOCREAR         VARCHAR                    NOT NULL,
   FECHACREAR           DATETIME                       NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER                    DEFAULT 0 NOT NULL,
   CONSTRAINT PK_FUN_FUNCIONES PRIMARY KEY (FUN_ID)
);


CREATE TABLE PEF_PERFILES  (
   PEF_ID               INTEGER              IDENTITY,
   PEF_CODIGO           VARCHAR      NOT NULL,
   PEF_DESCRIPCION      VARCHAR,
   PEF_DESCRIPCION_LARGA VARCHAR,
   VERSION              INTEGER                 DEFAULT 0 NOT NULL,
   USUARIOCREAR         VARCHAR       NOT NULL,
   FECHACREAR           DATETIME               NOT NULL,
   USUARIOMODIFICAR     VARCHAR,
   FECHAMODIFICAR       DATETIME,
   USUARIOBORRAR        VARCHAR,
   FECHABORRAR          DATETIME,
   BORRADO              INTEGER             DEFAULT 0 NOT NULL,
   CONSTRAINT PK_PEF_PERFILES PRIMARY KEY (PEF_ID)
);


CREATE TABLE ZON_PEF_USU
(
  ZON_ID            NUMBER(16)                  NOT NULL,
  PEF_ID            NUMBER(16)                  NOT NULL,
  USU_ID            NUMBER(16)                  NOT NULL,
  ZPU_ID            NUMBER(16)                  IDENTITY,
  VERSION           INTEGER                     DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_ZON_PEF_USU PRIMARY KEY (ZPU_ID)
);

CREATE TABLE FUN_PEF
(
  FUN_ID            NUMBER(16)                  NOT NULL,
  PEF_ID            NUMBER(16)                  NOT NULL,
  FP_ID             NUMBER(16)                  IDENTITY,
  VERSION           NUMBER                      DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_FUN_PEF PRIMARY KEY (FP_ID)
);

  
  
CREATE TABLE ARQ_ARQUETIPOS
(
  ARQ_ID             NUMBER(16)                 NOT NULL,
  ITI_ID             NUMBER(16),
  ARQ_PRIORIDAD      NUMBER(16),
  ARQ_NOMBRE         VARCHAR2(100 CHAR),
  VERSION            INTEGER                    DEFAULT 0                     NOT NULL,
  USUARIOCREAR       VARCHAR2(10 CHAR)          NOT NULL,
  FECHACREAR         TIMESTAMP(6)               NOT NULL,
  USUARIOMODIFICAR   VARCHAR2(10 CHAR),
  FECHAMODIFICAR     TIMESTAMP(6),
  USUARIOBORRAR      VARCHAR2(10 CHAR),
  FECHABORRAR        TIMESTAMP(6),
  BORRADO            NUMBER(1)                  DEFAULT 0                     NOT NULL,
  ARQ_NIVEL          NUMBER(4)                  DEFAULT 0                     NOT NULL,
  ARQ_GESTION        NUMBER(1)                  DEFAULT 1                     NOT NULL,
  ARQ_PLAZO_DISPARO  NUMBER(16)                 DEFAULT 0,
  DD_TSN_ID          NUMBER(16),
  RD_ID              NUMBER(16),
  CONSTRAINT PK_ARQ_ARQUETIPOS PRIMARY KEY (ARQ_ID)
);

CREATE TABLE DD_TSN_TIPO_SALTO_NIVEL
(
  DD_TSN_ID                 NUMBER(16)          NOT NULL,
  DD_TSN_CODIGO             VARCHAR2(10 CHAR)   NOT NULL,
  DD_TSN_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TSN_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TSN_TIPO_SALTO_NIVEL PRIMARY KEY (DD_TSN_ID)
)

CREATE TABLE LIA_LISTA_ARQUETIPOS
(
  LIA_ID             NUMBER(16)                 IDENTITY,
  ITI_ID             NUMBER(16),
  LIA_PRIORIDAD      NUMBER(16),
  LIA_NOMBRE         VARCHAR2(100 CHAR),
  VERSION            INTEGER                    DEFAULT 0                     NOT NULL,
  USUARIOCREAR       VARCHAR2(10 CHAR)          NOT NULL,
  FECHACREAR         TIMESTAMP(6)               NOT NULL,
  USUARIOMODIFICAR   VARCHAR2(10 CHAR),
  FECHAMODIFICAR     TIMESTAMP(6),
  USUARIOBORRAR      VARCHAR2(10 CHAR),
  FECHABORRAR        TIMESTAMP(6),
  BORRADO            NUMBER(1)                  DEFAULT 0                     NOT NULL,
  LIA_NIVEL          NUMBER(4)                  DEFAULT 0                     NOT NULL,
  LIA_GESTION        NUMBER(1)                  DEFAULT 1                     NOT NULL,
  LIA_PLAZO_DISPARO  NUMBER(16)                 DEFAULT 0,
  DD_TSN_ID          NUMBER(16),
  RD_ID              NUMBER(16),
  CONSTRAINT PK_LIA_LISTA_ARQUETIPOS PRIMARY KEY (LIA_ID)
)

  
CREATE TABLE RULE_DEFINITION
(
  RD_ID          NUMBER(16)                     IDENTITY,
  RD_NAME        VARCHAR2(250 CHAR)             NOT NULL,
  RD_DEFINITION  VARCHAR2(4000 CHAR)            NOT NULL,
  CONSTRAINT PK_RULE_DEFINITION PRIMARY KEY (RD_ID)
);

CREATE TABLE DD_ESM_ESTADOS_MODELO
(
  DD_ESM_ID                 NUMBER(16)          IDENTITY,
  DD_ESM_CODIGO             VARCHAR2(20 BYTE)   NOT NULL,
  DD_ESM_DESCRIPCION        VARCHAR2(50 BYTE),
  DD_ESM_DESCRIPCION_LARGA  VARCHAR2(250 BYTE),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 BYTE)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 BYTE),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 BYTE),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_ESM_ESTADOS_MODELO PRIMARY KEY (DD_ESM_ID)
);

CREATE TABLE MOA_MODELOS_ARQ  (
   MOA_ID		 			NUMBER(16)			IDENTITY,
   MOA_NOMBRE           	VARCHAR2(10 BYTE)   NOT NULL,
   MOA_DESCRIPCION          VARCHAR2(50 BYTE)   NOT NULL,
   DD_ESM_ID				NUMBER(16)	 DEFAULT 1		NOT NULL,
   MOA_OBSERVACIONES		VARCHAR2(100),		
   VERSION                  INTEGER         DEFAULT 0  	NOT NULL,
   USUARIOCREAR             VARCHAR2(10 BYTE)   				NOT NULL,
   FECHACREAR               TIMESTAMP(6)        				NOT NULL,
   USUARIOMODIFICAR         VARCHAR2(10 BYTE),
   FECHAMODIFICAR           TIMESTAMP(6),
   USUARIOBORRAR            VARCHAR2(10 BYTE),
   FECHABORRAR              TIMESTAMP(6),
   BORRADO                  NUMBER(1)       DEFAULT 0		NOT NULL,   
   CONSTRAINT MOA_MODELOS_ARQ PRIMARY KEY (MOA_ID)
);


CREATE TABLE MRA_REL_MODELO_ARQ  (
   MRA_ID		 			NUMBER(16)			IDENTITY,
   MOA_ID		           	NUMBER(16)			NOT NULL,
   LIA_ID					NUMBER(16)			NOT NULL,
   MRA_NIVEL 		        NUMBER(4)                  DEFAULT 0                     NOT NULL,
   ITI_ID					NUMBER(16),			
   MRA_PRIORIDAD			NUMBER(16)			NOT NULL,
   VERSION                  INTEGER         DEFAULT 0  	NOT NULL,
   USUARIOCREAR             VARCHAR2(10 BYTE)   				NOT NULL,
   FECHACREAR               TIMESTAMP(6)        				NOT NULL,
   USUARIOMODIFICAR         VARCHAR2(10 BYTE),
   FECHAMODIFICAR           TIMESTAMP(6),
   USUARIOBORRAR            VARCHAR2(10 BYTE),
   FECHABORRAR              TIMESTAMP(6),
   BORRADO                  NUMBER(1)       DEFAULT 0		NOT NULL,   
   CONSTRAINT PK_MRA_REL_MODELO_ARQ PRIMARY KEY (MRA_ID)
);	

-- tablas necesarias para plugin de itinerarios --

    -- DD_TIT_TIPO_ITINERARIO
CREATE TABLE DD_TIT_TIPO_ITINERARIOS
(
  DD_TIT_ID                 NUMBER(16)          NOT NULL,
  DD_TIT_CODIGO             VARCHAR2(50 CHAR)   NOT NULL,
  DD_TIT_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TIT_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TIT_TIPO_ITINERARIO PRIMARY KEY (DD_TIT_ID)
);    

      
	-- DD_AEX_AMBITOS_EXPEDIENTE 
CREATE TABLE DD_AEX_AMBITOS_EXPEDIENTE
(
  DD_AEX_ID                 NUMBER(16)          NOT NULL,
  DD_AEX_CODIGO             VARCHAR2(25 CHAR)   NOT NULL,
  DD_AEX_DESCRIPCION        VARCHAR2(250 CHAR)  NOT NULL,
  DD_AEX_DESCRIPCION_LARGA  VARCHAR2(500 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_AEX_AMBITOS_EXPEDIENTE PRIMARY KEY (DD_AEX_ID)
);	

	--ITI_ITINERARIOS
CREATE TABLE ITI_ITINERARIOS
(
  ITI_ID            NUMBER(16)                  IDENTITY,
  ITI_NOMBRE        VARCHAR2(100 CHAR),
  VERSION           INTEGER                     DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  DD_TIT_ID         NUMBER(16)                  NOT NULL,
  DD_AEX_ID         NUMBER(16),
  CONSTRAINT PK_ITI_ITINERARIOS PRIMARY KEY (ITI_ID),
  CONSTRAINT FK_ITI_ITIN_FK_DD_TIT_TIPO_IT FOREIGN KEY (DD_TIT_ID)REFERENCES DD_TIT_TIPO_ITINERARIOS (DD_TIT_ID),
  CONSTRAINT FK_ITI_ITIN_FK_DD_AEX_AMB_EXP FOREIGN KEY (DD_AEX_ID)REFERENCES DD_AEX_AMBITOS_EXPEDIENTE (DD_AEX_ID)
 );
 
 	--DD_EIN_ENTIDAD_INFORMACION	
 CREATE TABLE DD_EIN_ENTIDAD_INFORMACION
(
  DD_EIN_ID                 NUMBER(16)          NOT NULL,
  DD_EIN_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_EIN_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_EIN_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_EIN_ENTIDAD_INFORMACION PRIMARY KEY (DD_EIN_ID),
  CONSTRAINT UK_DD_EIN_ENTIDAD_INFORMACION UNIQUE (DD_EIN_CODIGO)
);
 	
 	--DD_EST_ESTADOS_ITINERARIOS
 CREATE TABLE DD_EST_ESTADOS_ITINERARIOS
(
  DD_EST_ID                 NUMBER(16)          NOT NULL,
  DD_EIN_ID                 NUMBER(16)          NOT NULL,
  DD_EST_ORDEN              INTEGER             NOT NULL,
  DD_EST_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_EST_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_EST_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_EST_ESTADOS_ITINERARIOS PRIMARY KEY (DD_EST_ID),
  CONSTRAINT UK_DD_EST_ESTADOS_ITINERARIOS UNIQUE (DD_EST_CODIGO), 
  CONSTRAINT FK_DD_EST_E_REFERENCE_DD_EIN_E  FOREIGN KEY (DD_EIN_ID)  REFERENCES DD_EIN_ENTIDAD_INFORMACION (DD_EIN_ID)
);

	--DD_TAC_TIPO_ACTUACION
CREATE TABLE DD_TAC_TIPO_ACTUACION
(
  DD_TAC_ID                 NUMBER(16)          NOT NULL,
  DD_TAC_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_TAC_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TAC_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TAC_TIPO_ACTUACION PRIMARY KEY(DD_TAC_ID),
  CONSTRAINT UK_DD_TAC_TIPO_ACTUACION UNIQUE (DD_TAC_CODIGO)
);
 
 	
 	--DD_TPO_TIPO_PROCEDIMIENTO
 CREATE TABLE DD_TPO_TIPO_PROCEDIMIENTO
(
  DD_TPO_ID                 NUMBER(16)			IDENTITY,
  DD_TPO_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_TPO_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TPO_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  DD_TPO_HTML               VARCHAR2(4000 CHAR),
  DD_TPO_XML_JBPM           VARCHAR2(50 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  DD_TAC_ID                 NUMBER(16),
  DD_TPO_SALDO_MIN          NUMBER(14,2),
  DD_TPO_SALDO_MAX          NUMBER(14,2),
  CONSTRAINT PK_DD_TPO_TIPO_PROCEDIMIENTO PRIMARY KEY(DD_TPO_ID),
  CONSTRAINT UK_DD_TPO_TIPO_PROCEDIMIENTO UNIQUE (DD_TPO_CODIGO),
  CONSTRAINT FK_DD_TPO_FK_DD_TAC  FOREIGN KEY (DD_TAC_ID) REFERENCES DD_TAC_TIPO_ACTUACION (DD_TAC_ID
  
);
 	--DD_TRE_TIPO_RECLAMACION 	
CREATE TABLE DD_TRE_TIPO_RECLAMACION
(
  DD_TRE_ID                 NUMBER(16)          NOT NULL,
  DD_TRE_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_TRE_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TRE_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TRE_TIPO_RECLAMACION PRIMARY KEY (DD_TRE_ID),
  CONSTRAINT UK_DD_TRE_TIPO_RECLAMACION UNIQUE (DD_TRE_CODIGO)
);

	--DD_PRV_PROVINCIA
CREATE TABLE DD_PRV_PROVINCIA
(
  DD_PRV_ID                 NUMBER(16)          NOT NULL,
  DD_PRV_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_PRV_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_PRV_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_PRV_PROVINCIA PRIMARY KEY (DD_PRV_ID),
  CONSTRAINT UK_DD_PRV_PROVINCIA UNIQUE (DD_PRV_CODIGO)  
);	

	--NIV_NIVEL
CREATE TABLE NIV_NIVEL
(
  NIV_ID                 NUMBER(16)             NOT NULL,
  NIV_DESCRIPCION        VARCHAR2(50 CHAR),
  NIV_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                INTEGER                DEFAULT 0                     NOT NULL,
  USUARIOCREAR           VARCHAR2(10 CHAR)      NOT NULL,
  FECHACREAR             TIMESTAMP(6)           NOT NULL,
  USUARIOMODIFICAR       VARCHAR2(10 CHAR),
  FECHAMODIFICAR         TIMESTAMP(6),
  USUARIOBORRAR          VARCHAR2(10 CHAR),
  FECHABORRAR            TIMESTAMP(6),
  BORRADO                NUMBER(1)              DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_NIV_NIVEL PRIMARY KEY (NIV_ID)
);
	

	--OFI_OFICINAS
CREATE TABLE OFI_OFICINAS
(
  OFI_ID                NUMBER(16)              NOT NULL,
  DD_PRV_ID             NUMBER(16),
  OFI_CODIGO            NUMBER(4)               NOT NULL,
  OFI_NOMBRE            VARCHAR2(100 CHAR),
  OFI_TIPO_VIA          VARCHAR2(100 CHAR),
  OFI_DOMICILIO         VARCHAR2(100 CHAR),
  OFI_DOMICILIO_PLAZA   VARCHAR2(100 CHAR),
  OFI_CODIGO_POSTAL     NUMBER(5),
  OFI_PERSONA_CONTACTO  VARCHAR2(100 CHAR),
  OFI_TELEFONO2         VARCHAR2(100 CHAR),
  OFI_TELEFONO1         VARCHAR2(100 CHAR),
  VERSION               INTEGER                 DEFAULT 0                     NOT NULL,
  USUARIOCREAR          VARCHAR2(10 CHAR)       NOT NULL,
  FECHACREAR            TIMESTAMP(6)            NOT NULL,
  USUARIOMODIFICAR      VARCHAR2(10 CHAR),
  FECHAMODIFICAR        TIMESTAMP(6),
  USUARIOBORRAR         VARCHAR2(10 CHAR),
  FECHABORRAR           TIMESTAMP(6),
  BORRADO               NUMBER(1)               DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_OFI_OFICINAS PRIMARY KEY (OFI_ID),
  CONSTRAINT FK_OFI_OFIC_FK_FF_PRV_DD_PRV_P  FOREIGN KEY (DD_PRV_ID)  REFERENCES DD_PRV_PROVINCIA (DD_PRV_ID)
);

 	--ZON_ZONIFICACION	
CREATE TABLE ZON_ZONIFICACION
(
  ZON_ID                 NUMBER(16)             NOT NULL,
  ZON_COD                VARCHAR2(50 CHAR)      NOT NULL,
  ZON_NUM_CENTRO         VARCHAR2(20 CHAR),
  ZON_DESCRIPCION        VARCHAR2(50 CHAR),
  ZON_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  ZON_PID                INTEGER,
  NIV_ID                 NUMBER(16)             NOT NULL,
  OFI_ID                 NUMBER(16),
  VERSION                INTEGER                DEFAULT 0                     NOT NULL,
  USUARIOCREAR           VARCHAR2(10 CHAR)      NOT NULL,
  FECHACREAR             TIMESTAMP(6)           NOT NULL,
  USUARIOMODIFICAR       VARCHAR2(10 CHAR),
  FECHAMODIFICAR         TIMESTAMP(6),
  USUARIOBORRAR          VARCHAR2(10 CHAR),
  FECHABORRAR            TIMESTAMP(6),
  BORRADO                NUMBER(1)              DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_ZON_ZONIFICACION PRIMARY KEY (ZON_ID),
  CONSTRAINT ZON_ZONIFICACION_IBFK_1 FOREIGN KEY (NIV_ID) REFERENCES NIV_NIVEL (NIV_ID),
  CONSTRAINT ZON_ZONIFICACION_IBFK_2 FOREIGN KEY (OFI_ID) REFERENCES OFI_OFICINAS (OFI_ID)
);
 	
	--COM_COMITES	
CREATE TABLE COM_COMITES
(
  COM_ID                   NUMBER(16)           NOT NULL,
  ZON_ID                   NUMBER(16),
  COM_NOMBRE               VARCHAR2(100 CHAR),
  COM_ATRIBUCION_MIN       INTEGER,
  COM_ATRIBUCION_MAX       INTEGER,
  COM_PRIORIDAD            INTEGER,
  COM_N_MIEMBROS           INTEGER,
  COM_N_MIEMBROS_RESTRICT  INTEGER,
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_COM_COMITES PRIMARY KEY (COM_ID),
  CONSTRAINT FK_COM_COMI_REFERENCE_ZON_ZONI FOREIGN KEY (ZON_ID) REFERENCES ZON_ZONIFICACION (ZON_ID)
);
 	
 	
	--DCA_DECISION_COMITE_AUTO
CREATE TABLE DCA_DECISION_COMITE_AUTO
(
  DCA_ID                       NUMBER(16)       IDENTITY,
  VERSION                      INTEGER          DEFAULT 0                     NOT NULL,
  USUARIOCREAR                 VARCHAR2(10 CHAR) NOT NULL,
  FECHACREAR                   TIMESTAMP(6)     NOT NULL,
  USUARIOMODIFICAR             VARCHAR2(10 CHAR),
  FECHAMODIFICAR               TIMESTAMP(6),
  USUARIOBORRAR                VARCHAR2(10 CHAR),
  FECHABORRAR                  TIMESTAMP(6),
  BORRADO                      NUMBER(1)        DEFAULT 0                     NOT NULL,
  GAS_ID                       NUMBER(16)       NOT NULL,
  SUP_ID                       NUMBER(16)       NOT NULL,
  COM_ID                       NUMBER(16)       NOT NULL,
  DD_TAC_ID                    NUMBER(16)       NOT NULL,
  DD_TRE_ID                    NUMBER(16)       NOT NULL,
  DD_TPO_ID                    NUMBER(16)       NOT NULL,
  DCA_PORCENTAJE_RECUPERACION  NUMBER(3)        NOT NULL,
  DCA_PLAZO_RECUPERACION       INTEGER          NOT NULL,
  DCA_ACEPTACION_AUTO          NUMBER(1)        DEFAULT 0                     NOT NULL,
  CONSTRAINT FK_DCA_DECI_FK_TPO_TIP FOREIGN KEY (DD_TPO_ID) REFERENCES DD_TPO_TIPO_PROCEDIMIENTO (DD_TPO_ID),
  CONSTRAINT FK_DCA_DECI_FK_DD_TRE_DD_TRE_T FOREIGN KEY (DD_TRE_ID) REFERENCES DD_TRE_TIPO_RECLAMACION (DD_TRE_ID),
  CONSTRAINT FK_DCA_DECI_REFERENCE_GAS FOREIGN KEY (GAS_ID) REFERENCES USD_USUARIOS_DESPACHOS (USD_ID),
  CONSTRAINT FK_DCA_DECI_REFERENCE_SUP FOREIGN KEY (SUP_ID) REFERENCES USD_USUARIOS_DESPACHOS (USD_ID),
  CONSTRAINT FK_DCA_DECI_FK_EXP_CO_COM_COMI FOREIGN KEY (COM_ID) REFERENCES COM_COMITES (COM_ID),
  CONSTRAINT FK_DCA_DECI_FK_DD_TAC_DD_TAC_T FOREIGN KEY (DD_TAC_ID) REFERENCES DD_TAC_TIPO_ACTUACION (DD_TAC_ID)
);

	--PTE_PROVEEDOR_TELECOBRO
CREATE TABLE PTE_PROVEEDOR_TELECOBRO
(
  PTE_ID            NUMBER(16)                  NOT NULL,
  PTE_PROVEEDOR     VARCHAR2(100 CHAR),
  VERSION           INTEGER                     DEFAULT 0                     NOT NULL,
  USUARIOCREAR      VARCHAR2(10 CHAR)           NOT NULL,
  FECHACREAR        TIMESTAMP(6)                NOT NULL,
  USUARIOMODIFICAR  VARCHAR2(10 CHAR),
  FECHAMODIFICAR    TIMESTAMP(6),
  USUARIOBORRAR     VARCHAR2(10 CHAR),
  FECHABORRAR       TIMESTAMP(6),
  BORRADO           NUMBER(1)                   DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_PTE_PROVEEDOR_TELECOBRO PRIMARY KEY (PTE_ID)
);
 	
 	--TEL_ESTADO_TELECOBRO
CREATE TABLE TEL_ESTADO_TELECOBRO
(
  TEL_ID               NUMBER(16)               IDENTITY,
  PTE_ID               NUMBER(16)               NOT NULL,
  TEL_PLAZO_INI        INTEGER                  DEFAULT 0                     NOT NULL,
  TEL_PLAZO_FIN        INTEGER                  DEFAULT 0                     NOT NULL,
  TEL_DIAS_ANTELACION  INTEGER                  DEFAULT 0                     NOT NULL,
  TEL_PLAZO_RESPUESTA  INTEGER                  DEFAULT 0                     NOT NULL,
  TEL_AUTOMATICO       NUMBER(1)                DEFAULT 0                     NOT NULL,
  VERSION              INTEGER                  DEFAULT 0                     NOT NULL,
  USUARIOCREAR         VARCHAR2(10 CHAR)        NOT NULL,
  FECHACREAR           TIMESTAMP(6)             NOT NULL,
  USUARIOMODIFICAR     VARCHAR2(10 CHAR),
  FECHAMODIFICAR       TIMESTAMP(6),
  USUARIOMODIF         VARCHAR2(10 CHAR),
  FECHAMODIF           DATE,
  USUARIOBORRAR        VARCHAR2(10 CHAR),
  FECHABORRAR          TIMESTAMP(6),
  BORRADO              NUMBER(1)                DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_TEL_ESTADO_TELECOBRO PRIMARY KEY (TEL_ID),
  CONSTRAINT FK_TEL_ESTA_FK_PTE_TE_PTE_PROV FOREIGN KEY (PTE_ID) REFERENCES PTE_PROVEEDOR_TELECOBRO (PTE_ID)  
); 	

 	--EST_ESTADOS
CREATE TABLE EST_ESTADOS
(
  EST_ID             NUMBER(16)                 IDENTITY,
  PEF_ID_GESTOR      NUMBER(16),
  PEF_ID_SUPERVISOR  NUMBER(16),
  TEL_ID             NUMBER(16),
  DCA_ID             NUMBER(16),
  ITI_ID             NUMBER(16),
  DD_EST_ID          NUMBER(16),
  EST_TELECOBRO      NUMBER(1)                  DEFAULT 0,
  EST_PLAZO          NUMBER(19),
  EST_AUTOMATICO     NUMBER(1)                  DEFAULT 0,
  VERSION            INTEGER                    DEFAULT 0                     NOT NULL,
  USUARIOCREAR       VARCHAR2(10 CHAR)          NOT NULL,
  FECHACREAR         TIMESTAMP(6)               NOT NULL,
  USUARIOMODIFICAR   VARCHAR2(10 CHAR),
  FECHAMODIFICAR     TIMESTAMP(6),
  USUARIOBORRAR      VARCHAR2(10 CHAR),
  FECHABORRAR        TIMESTAMP(6),
  BORRADO            NUMBER(1)                  DEFAULT 0                     NOT NULL,
  CONSTRAINT FK_EST_ESTA_EST_DD_ES_DD_EST_E  FOREIGN KEY (DD_EST_ID) REFERENCES DD_EST_ESTADOS_ITINERARIOS (DD_EST_ID),
  CONSTRAINT FK_EST_ESTA_FK_DCA_ES_DCA_DECI  FOREIGN KEY (DCA_ID) REFERENCES DCA_DECISION_COMITE_AUTO (DCA_ID),
  CONSTRAINT FK_EST_ESTA_FK_EST_IT_ITI_ITIN FOREIGN KEY (ITI_ID) REFERENCES ITI_ITINERARIOS (ITI_ID),
  CONSTRAINT FK_EST_ESTA_FK_EST_TE_TEL_ESTA FOREIGN KEY (TEL_ID) REFERENCES TEL_ESTADO_TELECOBRO (TEL_ID),
  CONSTRAINT FK_EST_ESTA_FK_PEF_ES_PEF_PER2 FOREIGN KEY (PEF_ID_GESTOR) REFERENCES PEF_PERFILES (PEF_ID),
  CONSTRAINT FK_EST_ESTA_FK_PEF_ES_PEF_PERF FOREIGN KEY (PEF_ID_SUPERVISOR) REFERENCES PEF_PERFILES (PEF_ID)
);

