--TABLA DDORIGENCOBROS

CREATE TABLE DD_OC_ORIGEN_COBRO
(
  DD_OC_ID                 NUMBER(16)          NOT NULL,
  DD_OC_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_OC_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_OC_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL
)
TABLESPACE UGAS001
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX UK_DD_OC_ORIGEN_COBRO ON DD_OC_ORIGEN_COBRO
(DD_OC_CODIGO)
LOGGING
TABLESPACE UGAS001
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX PK_DD_OC_ORIGEN_COBRO ON DD_OC_ORIGEN_COBRO
(DD_OC_ID)
LOGGING
TABLESPACE UGAS001
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DD_OC_ORIGEN_COBRO ADD (
  CONSTRAINT PK_DD_OC_ORIGEN_COBRO
 PRIMARY KEY
 (DD_OC_ID)
    USING INDEX 
    TABLESPACE UGAS001
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       2147483645
                PCTINCREASE      0
               ));

ALTER TABLE DD_OC_ORIGEN_COBRO ADD (
  CONSTRAINT UK_DD_OC_ORIGEN_COBRO
 UNIQUE (DD_OC_CODIGO)
    USING INDEX 
    TABLESPACE UGAS001
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       2147483645
                PCTINCREASE      0
               ));

SET DEFINE OFF;
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (1, 'PM', 'Pago contra la masa', 'Pago contra la masa', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (2, 'PF', 'Pago fiador/hipotecante', 'Pago fiador/hipotecante', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (3, 'PO', 'Pago organismos públicos', 'Pago organismos públicos', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (4, 'PC', 'Pago convenio', 'Pago convenio', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (5, 'PL', 'Pago liquidación', 'Pago liquidación', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (6, 'EF', 'Ejecución fiadores', 'Ejecución fiadores', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (7, 'EP', 'Ejecución prendas', 'Ejecución prendas', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (8, 'ASC', 'Adjudicación subasta concursal', 'Adjudicación subasta concursal', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (9, 'ASE', 'Adjudicación subasta ejecutiva', 'Adjudicación subasta ejecutiva', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (10, 'CG', 'Compra grupo', 'Compra grupo', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (11, 'CT', 'Compra terceros', 'Compra terceros', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_OC_ORIGEN_COBRO
   (DD_OC_ID, DD_OC_CODIGO, DD_OC_DESCRIPCION, DD_OC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (12, 'OT', 'Otros', 'Otros', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
COMMIT;
               

--TABLA MODALIDAD COBRO
CREATE TABLE DD_MC_MODALIDAD_COBRO
(
  DD_MC_ID                 NUMBER(16)          NOT NULL,
  DD_MC_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_MC_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_MC_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL
)
TABLESPACE UGAS001
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX UK_DD_MC_MODALIDAD_COBRO ON DD_MC_MODALIDAD_COBRO
(DD_MC_CODIGO)
LOGGING
TABLESPACE UGAS001
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX PK_DD_MC_MODALIDAD_COBRO ON DD_MC_MODALIDAD_COBRO
(DD_MC_ID)
LOGGING
TABLESPACE UGAS001
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       2147483645
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DD_MC_MODALIDAD_COBRO ADD (
  CONSTRAINT PK_DD_MC_ORIGEN_COBRO
 PRIMARY KEY
 (DD_MC_ID)
    USING INDEX 
    TABLESPACE UGAS001
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       2147483645
                PCTINCREASE      0
               ));

ALTER TABLE DD_MC_MODALIDAD_COBRO ADD (
  CONSTRAINT UK_DD_MC_MODALIDAD_COBRO
 UNIQUE (DD_MC_CODIGO)
    USING INDEX 
    TABLESPACE UGAS001
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       2147483645
                PCTINCREASE      0
               ));
                              
SET DEFINE OFF;
Insert into DD_MC_MODALIDAD_COBRO
   (DD_MC_ID, DD_MC_CODIGO, DD_MC_DESCRIPCION, DD_MC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (4, 'AD', 'Adjudicado', 'Adjudicado', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_MC_MODALIDAD_COBRO
   (DD_MC_ID, DD_MC_CODIGO, DD_MC_DESCRIPCION, DD_MC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (3, 'SU', 'Subrogado', 'Subrogado', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_MC_MODALIDAD_COBRO
   (DD_MC_ID, DD_MC_CODIGO, DD_MC_DESCRIPCION, DD_MC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (2, 'FI', 'Financiado', 'Financiado', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
Insert into DD_MC_MODALIDAD_COBRO
   (DD_MC_ID, DD_MC_CODIGO, DD_MC_DESCRIPCION, DD_MC_DESCRIPCION_LARGA, VERSION, USUARIOCREAR, FECHACREAR, BORRADO)
 Values
   (1, 'EF', 'Efectivo', 'Efectivo', 0, 'DD', TO_TIMESTAMP('21/05/2012 0:00:00.000000','DD/MM/YYYY fmHH24fm:MI:SS.FF'), 0);
COMMIT;

--ALTERS DE LA TABLA CPA_COBROS_PAGOS

ALTER TABLE CPA_COBROS_PAGOS
 ADD (DD_OC_ID  NUMBER(16));
 
ALTER TABLE CPA_COBROS_PAGOS
 ADD (DD_MC_ID  NUMBER(16));
 
 ALTER TABLE CPA_COBROS_PAGOS
 ADD CONSTRAINT FK_CPA_DD_OC 
 FOREIGN KEY (DD_OC_ID) 
 REFERENCES DD_OC_ORIGEN_COBRO (DD_OC_ID);

 ALTER TABLE CPA_COBROS_PAGOS
 ADD CONSTRAINT FK_CPA_DD_MC 
 FOREIGN KEY (DD_MC_ID) 
 REFERENCES DD_MC_MODALIDAD_COBRO (DD_MC_ID);
               