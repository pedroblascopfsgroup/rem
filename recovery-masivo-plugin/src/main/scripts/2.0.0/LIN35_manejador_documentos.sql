-- diccionario de estado de ficheros
--DROP SEQUENCE S_DD_EPF_ESTADO_PROCES_FICH;


CREATE SEQUENCE S_DD_EPF_ESTADO_PROCES_FICH;

--DROP TABLE DD_EPF_ESTADO_PROCES_FICH;


CREATE TABLE DD_EPF_ESTADO_PROCES_FICH  (
   DD_EPF_ID                     NUMBER(16)            NOT NULL,
   DD_EPF_CODIGO                   VARCHAR2(20 BYTE)   NOT NULL,
   DD_EPF_DESCRIPCION           VARCHAR2(50 BYTE),
   DD_EPF_DESCRIPCION_LARGA     VARCHAR2(250 BYTE),
   VERSION                      INTEGER         DEFAULT 0      NOT NULL,
   USUARIOCREAR                 VARCHAR2(10 BYTE)                   NOT NULL,
   FECHACREAR                   TIMESTAMP(6)                        NOT NULL,
   USUARIOMODIFICAR             VARCHAR2(10 BYTE),
   FECHAMODIFICAR               TIMESTAMP(6),
   USUARIOBORRAR                VARCHAR2(10 BYTE),
   FECHABORRAR                  TIMESTAMP(6),
   BORRADO                          NUMBER(1)       DEFAULT 0        NOT NULL,   
   CONSTRAINT PK_DD_EPF_ESTADO_PROCES_FICH PRIMARY KEY (DD_EPF_ID)
);

INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'CRG','Cargando','Cargando','DD',SYSDATE);

INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'PTV','Pte. Validar','Pte. Validar','DD',SYSDATE);

INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'VAL','Validado','Validado','DD',SYSDATE);
    
INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'PTP','Pte. Procesar','Pte. Procesar','DD',SYSDATE);
    
INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'EPR','En proceso','En proceso','DD',SYSDATE);
    
INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'PRC','Procesado','Procesado','DD',SYSDATE);
    
INSERT INTO DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID,DD_EPF_CODIGO,DD_EPF_DESCRIPCION,DD_EPF_DESCRIPCION_LARGA,USUARIOCREAR,FECHACREAR) 
    VALUES (S_DD_EPF_ESTADO_PROCES_FICH.nextVal,'ERR','Error','Error','DD',SYSDATE);
        
-- proceso
CREATE SEQUENCE S_PRM_PROCESO_MASIVO;

--DROP TABLE PRM_PROCESO_MASIVO;
CREATE TABLE PRM_PROCESO_MASIVO  (
   PRM_ID                       NUMBER(16)            NOT NULL,
   PRM_DESCRIPCION              VARCHAR2(250 BYTE),
   DD_OPM_ID                    NUMBER(16)            NOT NULL,
   DD_EPF_ID                    NUMBER(16)            NOT NULL,
   VERSION                      INTEGER         DEFAULT 0      NOT NULL,
   USUARIOCREAR                 VARCHAR2(10 BYTE)                   NOT NULL,
   FECHACREAR                   TIMESTAMP(6)                        NOT NULL,
   USUARIOMODIFICAR             VARCHAR2(10 BYTE),
   FECHAMODIFICAR               TIMESTAMP(6),
   USUARIOBORRAR                VARCHAR2(10 BYTE),
   FECHABORRAR                  TIMESTAMP(6),
   BORRADO                          NUMBER(1)       DEFAULT 0        NOT NULL,   
   CONSTRAINT PK_PRM_PROCESO_MASIVO PRIMARY KEY (PRM_ID),
   CONSTRAINT FK_PRM_DD_OPM_ID FOREIGN KEY (DD_OPM_ID) REFERENCES DD_OPM_OPERACION_MASIVA (DD_OPM_ID),
   CONSTRAINT FK_PRM_DD_EPF_ID FOREIGN KEY (DD_EPF_ID) REFERENCES DD_EPF_ESTADO_PROCES_FICH (DD_EPF_ID)
);    
    
    
-- ducumentos
--DROP SEQUENCE S_DMS_DOCUMENTOS_MASIVO ;
CREATE SEQUENCE S_DMS_DOCUMENTOS_MASIVO;

--DROP TABLE DMS_DOCUMENTOS_MASIVO;
CREATE TABLE DMS_DOCUMENTOS_MASIVO  (
   DMS_ID                       NUMBER(16)            NOT NULL,
   DMS_NOMBRE                   VARCHAR2(250 BYTE)  NOT NULL,
   DMS_DIRECTORIO               VARCHAR2(250 BYTE)  NOT NULL,
   PRM_ID						NUMBER(16)            NOT NULL,
   DMS_CONTENIDO_FICH           BLOB  ,
   DMS_ERRORES_FICH             BLOB  ,
   VERSION                      INTEGER         DEFAULT 0      NOT NULL,
   USUARIOCREAR                 VARCHAR2(10 BYTE)                   NOT NULL,
   FECHACREAR                   TIMESTAMP(6)                        NOT NULL,
   USUARIOMODIFICAR             VARCHAR2(10 BYTE),
   FECHAMODIFICAR               TIMESTAMP(6),
   USUARIOBORRAR                VARCHAR2(10 BYTE),
   FECHABORRAR                  TIMESTAMP(6),
   BORRADO                          NUMBER(1)       DEFAULT 0        NOT NULL,   
   CONSTRAINT PK_DMS_DOCUMENTOS_MASIVO PRIMARY KEY (DMS_ID),
   CONSTRAINT FK_DMS_DD_PRM_ID FOREIGN KEY (PRM_ID) REFERENCES PRM_PROCESO_MASIVO (PRM_ID)
);    
    