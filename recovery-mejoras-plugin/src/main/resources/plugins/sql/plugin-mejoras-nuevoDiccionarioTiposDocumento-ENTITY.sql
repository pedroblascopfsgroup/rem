-- NUEVO DICCIONARIO DE DATOS DE TIPO DE DOCUMENTO

CREATE SEQUENCE S_DD_TDC_TIPO_DOCUMENTO
  START WITH 1
  MAXVALUE 999999999999999999999999999;

CREATE TABLE DD_TDC_TIPO_DOCUMENTO
(
  DD_TDC_ID                 NUMBER(16),
  DD_TDC_CODIGO             VARCHAR2(20 CHAR)   NOT NULL,
  DD_TDC_DESCRIPCION        VARCHAR2(50 CHAR),
  DD_TDC_DESCRIPCION_LARGA  VARCHAR2(250 CHAR),
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TDC_TIPO_DOCUMENTO PRIMARY KEY (DD_TDC_ID),
  CONSTRAINT UK_DD_TDC_TIPO_DOCUMENTO UNIQUE (DD_TDC_CODIGO)
);


insert into DD_TDC_TIPO_DOCUMENTO(DD_TDC_ID,DD_TDC_CODIGO,DD_TDC_DESCRIPCION,DD_TDC_DESCRIPCION_LARGA,VERSION,
USUARIOCREAR,FECHACREAR,BORRADO)
values(S_DD_TDC_TIPO_DOCUMENTO.nextval, 'TEJ', 'Título ejecutivo', 'Título ejecutivo', 0, 
'DIA',SYSDATE, 0);
insert into DD_TDC_TIPO_DOCUMENTO(DD_TDC_ID,DD_TDC_CODIGO,DD_TDC_DESCRIPCION,DD_TDC_DESCRIPCION_LARGA,VERSION,
USUARIOCREAR,FECHACREAR,BORRADO)
values(S_DD_TDC_TIPO_DOCUMENTO.nextval, 'ISL', 'Informe de solvencias', 'Informe de solvencias', 0, 
'DIA',SYSDATE, 0);
insert into DD_TDC_TIPO_DOCUMENTO(DD_TDC_ID,DD_TDC_CODIGO,DD_TDC_DESCRIPCION,DD_TDC_DESCRIPCION_LARGA,VERSION,
USUARIOCREAR,FECHACREAR,BORRADO)
values(S_DD_TDC_TIPO_DOCUMENTO.nextval, 'DBN', 'Declaración de bienes', 'Declaración de bienes', 0, 
'DIA',SYSDATE, 0);
insert into DD_TDC_TIPO_DOCUMENTO(DD_TDC_ID,DD_TDC_CODIGO,DD_TDC_DESCRIPCION,DD_TDC_DESCRIPCION_LARGA,VERSION,
USUARIOCREAR,FECHACREAR,BORRADO)
values(S_DD_TDC_TIPO_DOCUMENTO.nextval, 'CNT', 'Contrato', 'Contrato', 0, 
'DIA',SYSDATE, 0);
insert into DD_TDC_TIPO_DOCUMENTO(DD_TDC_ID,DD_TDC_CODIGO,DD_TDC_DESCRIPCION,DD_TDC_DESCRIPCION_LARGA,VERSION,
USUARIOCREAR,FECHACREAR,BORRADO)
values(S_DD_TDC_TIPO_DOCUMENTO.nextval, 'MCT', 'Movimiento de cuenta', 'Movimiento de cuenta', 0, 
'DIA',SYSDATE, 0);

-- nuevas columnas en la tabla adjuntos de personas
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_NOMBRE_NOTARIO VARCHAR2(50 CHAR));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_CALLE_NOTARIO VARCHAR2(30 CHAR));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_CODIGOPOSTAL_NOTARIO NUMBER(10));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_NUMERO_NOTARIO VARCHAR2(50 CHAR));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_LOCALIDAD_NOTARIO VARCGAR2(50 CHAR));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_PROVINCIA_NOTARIO VARCHAR2(6 CHAR));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_TELEFONO1_NOTARIO NUMBER(15));
alter table ADP_ADJUNTOS_PERSONAS  ADD (ADP_TELEFONO2_NOTARIO NUMBER(15));
alter table ADP_ADJUNTOS_PERSONAS  ADD (DD_TDC_ID  NUMBER(16));
alter table ADP_ADJUNTOS_PERSONAS  ADD (DD_TDC_ID  NUMBER(16));
-- Añadir herencia AdjuntoPersona -> Procedimiento
ALTER TABLE ADP_ADJUNTOS_PERSONAS ADD (DTYPE VARCHAR2 (20 CHAR) DEFAULT 'EXTAdjuntoPersona' NOT NULL);


ALTER TABLE ADP_ADJUNTOS_PERSONAS ADD (
  CONSTRAINT FK_ADP_DD_TDC_ID 
 FOREIGN KEY (DD_TDC_ID) 
 REFERENCES DD_TDC_TIPO_DOCUMENTO (DD_TDC_ID));
