<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="" name="tramiteSubastaV4">

	<start-state name="Inicio">
		<transition to="P401_SolicitudSubasta" name="iniciarProceso"></transition>
	</start-state>

	<state name="P401_SolicitudSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4EnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave"> 
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_SenyalamientoSubasta" name="avanzaBPM"></transition>
		<transition to="P401_SolicitudSubasta" name="activarAlerta"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>

	<state name="P401_SenyalamientoSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_SenyalamientoSubasta" name="activarAlerta"></transition>
		<transition to="P401_SolicitudSubasta" name="vueltaAtras"></transition>
		<transition to="fork1" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>

	<fork name="fork1">
		<transition to="P401_CelebracionSubasta" name="Celebracion"></transition>
		<transition to="P401_AdjuntarInformeSubasta" name="AdjuntarInforme"></transition>
		<transition to="P401_PrepararPropuestaSubasta" name="PrepararPropuesta"></transition>
		<transition to="P401_SolicitarNumActivo" name="SolicitarNumActivo"></transition>
	</fork>

	<state name="P401_CelebracionSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="forkCelebracion" name="avanzaBPM"></transition>		
		<transition to="P401_CelebracionSubasta" name="activarAlerta"></transition>
		<transition to="Fin4" name="Fin"></transition>
	</state>
	
	<fork name="forkCelebracion">
		<transition to="A" name="A"></transition>
		<transition to="B" name="B"></transition>
		<transition to="C" name="C"></transition>
		<transition to="D" name="D"></transition>
		<transition to="E" name="E"></transition>
		<transition to="F" name="F"></transition>
		<transition to="G" name="G"></transition>
		<transition to="H" name="H"></transition>
	</fork>
	
	<decision name="A" expression="#{DecisionRama_1}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_BPMTramiteSubastaV4" name="si"></transition>
	</decision>
	
	<decision name="B" expression="#{DecisionRama_2}">
		<transition to="Fin" name="no"></transition>
		<transition to="Decision3" name="si"></transition>
	</decision>
	
	<decision name="C" expression="#{DecisionRama_3}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_PrepararCesionRemate" name="si"></transition>
	</decision>
	
	<decision name="D" expression="#{DecisionRama_4}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_BPMTramiteCesionRemateV4" name="si"></transition>
	</decision>
	
	<decision name="E" expression="#{DecisionRama_5}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_RegistrarActaSubasta" name="si"></transition>
	</decision>
	
	<decision name="F" expression="#{DecisionRama_6}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_GenerarPropuestaNUSE" name="si"></transition>
	</decision>
	
	<decision name="G" expression="#{DecisionRama_7}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_BPMTramiteAdjudicacionV4" name="si"></transition>
	</decision>
	
	<decision name="H" expression="#{DecisionRama_8}">
		<transition to="Fin" name="no"></transition>
		<transition to="P401_SolicitarMtoPago" name="si"></transition>
	</decision>
	
	<state name="P401_PrepararCesionRemate">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_PrepararCesionRemate" name="activarAlerta"></transition>
		<transition to="P401_AprobacionPropCesionRemate" name="avanzaBPM"></transition>
		<transition to="P401_CelebracionSubasta" name="vueltaAtras"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>
	

	<state name="P401_AdjuntarInformeSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin4" name="Fin"></transition>
		<transition to="Fin4" name="avanzaBPM"></transition>
		<transition to="P401_AdjuntarInformeSubasta" name="activarAlerta"></transition>
	</state>

	<state name="P401_PrepararPropuestaSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_PrepararPropuestaSubastaDecision" name="avanzaBPM"></transition>
		<transition to="P401_PrepararPropuestaSubasta" name="activarAlerta"></transition>
		<transition to="Fin4" name="Fin"></transition>
	</state>
	
	<decision name="P401_PrepararPropuestaSubastaDecision" expression="#{P401_PrepararPropuestaSubastaDecision}">
		<transition to="P401_ValidarPropuesta" name="subastaNoDelegada"></transition>
		<transition to="P401_LecturaAceptacionInstrucciones" name="subastaDelegada"></transition>
		<transition to="P401_BPMTramiteTributacionEnBienesV4" name="subastaDelegadaPersonaJuridica"></transition>
	</decision>

	<state name="P401_ValidarPropuesta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_ValidarPropuestaDecision" name="avanzaBPM"></transition>
		<transition to="P401_ValidarPropuesta" name="activarAlerta"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name="P401_ValidarPropuestaDecision" expression="#{P401_ValidarPropuestaDecision}">
		<transition to="P401_PrepararPropuestaSubasta" name="ModificarInstrucciones"></transition>
		<transition to="P401_SuspenderSubasta" name="SuspenderSubasta"></transition>
		<transition to="P401_LecturaAceptacionInstrucciones" name="lectura"></transition>
		<transition to="fork2" name="lecturaYTributacion"></transition>
	</decision>
	
	<fork name="fork2">
		<transition to="P401_LecturaAceptacionInstrucciones" name="lecturaInstrucciones"></transition>
		<transition to="P401_BPMTramiteTributacionEnBienesV4" name="tramiteTributacionEnBienes"></transition>
	</fork>

	<state name="P401_SuspenderSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Decision1" name="avanzaBPM"> </transition>
		<transition to="P401_SuspenderSubasta" name="activarAlerta"></transition>
		<transition to="P401_ValidarPropuesta" name="vueltaAtras"></transition>
		<transition to="Fin2" name="Fin"></transition>
	</state>

	<node name="Decision1">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>genericUserDecisionActionHandler
			</targetBean>
		</action>
		<transition to="Fin2" name="Fin"></transition>
	</node>

	<state name="P401_LecturaAceptacionInstrucciones">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4LeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_LecturaAceptacionInstrucciones" name="activarAlerta"></transition>
		<transition to="Fin2" name="avanzaBPM"></transition>
		<transition to="Fin2" name="Fin"></transition>
	</state>

	<state name="P401_BPMTramiteTributacionEnBienesV4">	
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin2" name="tramiteTributacionEnBienesV4"></transition>
	</state>



	<node name="Decision2">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>genericUserDecisionActionHandler
			</targetBean>
		</action>	
		<transition to="Fin3" name="Fin"></transition>
	</node>

	<state name="P401_BPMTramiteSubastaV4">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin3" name="TramiteSubastaV4"></transition>
	</state>

	<state name="P401_RegistrarActaSubasta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin" name="avanzaBPM"></transition>		
		<transition to="P401_RegistrarActaSubasta" name="activarAlerta"></transition>
		<transition to="P401_CelebracionSubasta" name="vueltaAtras"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>
		
	<state name="P401_BPMTramiteAdjudicacionV4">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>subastaV4EnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin" name="tramiteAdjudicacionV4"></transition>
	</state>

	<state name="P401_SolicitarMtoPago">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_ConfirmarRecepcionMtoPago" name="avanzaBPM"></transition>
		<transition to="P401_SolicitarMtoPago" name="activarAlerta"></transition>
		<transition to="P401_RegistrarActaSubasta" name="vueltaAtras"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>

	<state name="P401_ContabilizarCierreDeuda">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="Fin3" name="avanzaBPM"></transition>
		<transition to="P401_ContabilizarCierreDeuda" name="activarAlerta"></transition>
		<transition to="P401_RegistrarActaSubasta" name="vueltaAtras"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>

	<state name="P401_ConfirmarRecepcionMtoPago">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_ConfirmarRecepcionMtoPagoDecision" name="avanzaBPM"></transition>
		<transition to="P401_ConfirmarRecepcionMtoPago" name="activarAlerta"></transition>
		<transition to="P401_SolicitarMtoPago" name="vueltaAtras"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>
	
	<decision name="P401_ConfirmarRecepcionMtoPagoDecision" expression="#{P401_ConfirmarRecepcionMtoPagoDecision}">
		<transition to="Fin" name="bienConAdjudicacion"></transition>
		<transition to="Decision3" name="bienSinAdjudicacion"></transition>
	</decision>

	<node name="Decision3">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>genericUserDecisionActionHandler
			</targetBean>
		</action>
		<transition to="Fin3" name="Fin"></transition>
	</node>


	<state name="P401_BPMTramiteCesionRemateV4">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>cesionRemateV4EnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>		
		<transition to="Fin3" name="tramiteCesionRemateV4"></transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>

	<state name="P401_AprobacionPropCesionRemate">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>genericLeaveActionHandler
				</targetBean>
			</action>
		</event>	
		<transition to="P401_AprobacionPropCesionRemateDecision" name="avanzaBPM"></transition>
		<transition to="P401_AprobacionPropCesionRemate" name="activarAlerta"></transition>
		<transition to="P401_PrepararCesionRemate" name="vueltaAtras"> </transition>
		<transition to="Fin3" name="Fin"></transition>
	</state>
	
	<decision name="P401_AprobacionPropCesionRemateDecision" expression="#{P401_AprobacionPropCesionRemateDecision}">
		<transition to="P401_BPMTramiteCesionRemateV4" name="OK"></transition>
		<transition to="Decision2" name="KO"></transition>
	</decision>

	<node name="P401_SolicitarNumActivo">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>solicitarNumActivoHandler
			</targetBean>
		</action>
		<transition to="P401_SolicitarTasacion" name="avanzaBPM"></transition>
	</node>

	<node name="P401_SolicitarTasacion">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>solicitarTasacionHandler
			</targetBean>
		</action>
		<transition to="Fin4" name="Fin"></transition>
		<transition to="P401_SolicitarNumActivo" name="avanzaBPM"></transition>
	</node>

	<node name="P401_GenerarPropuestaNUSE">
		<action name="miTarea" config-type="bean"
			class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
			<targetBean>generarPropuestaNUSEHandler</targetBean>
		</action>
		<transition to="P401_ContabilizarCierreDeuda" name="avanzaBPM"></transition>
	</node>
	
	<end-state name="Fin">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>endProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

	<end-state name="Fin2">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>endProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

	<end-state name="Fin3">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>endProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

	<end-state name="Fin4">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>endProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>


</process-definition>
