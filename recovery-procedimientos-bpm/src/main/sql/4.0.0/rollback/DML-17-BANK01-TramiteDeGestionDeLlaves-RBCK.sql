-/*
* SCRIPT PARA BORRADO DE DATOS BPM: Tr√°mite de gestion de llaves
* BPM: P417 tramiteDeGestionDeLlaves
* FECHA: 20141013
* PARTES: 1/2
*/

SET DEFINE OFF;

--BORRADO DEL NUEVO PROCEDIMIENTO
DELETE BANK01.DD_TPO_TIPO_PROCEDIMIENTO WHERE DD_TPO_CODIGO = 'P417';

--P417_RegistrarCambioCerradura:
DELETE TFI_TAREAS_FORM_ITEMS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarCambioCerradura'); --2
DELETE DD_PTP_PLAZOS_TAREAS_PLAZAS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarCambioCerradura'); --1
DELETE TAP_TAREA_PROCEDIMIENTO WHERE TAP_CODIGO = 'P417_RegistrarCambioCerradura'; --1


--P417_RegistrarEnvioLlaves:
DELETE TFI_TAREAS_FORM_ITEMS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarEnvioLlaves'); --4
DELETE DD_PTP_PLAZOS_TAREAS_PLAZAS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarEnvioLlaves'); --1
DELETE TAP_TAREA_PROCEDIMIENTO WHERE TAP_CODIGO = 'P417_RegistrarEnvioLlaves'; --1


--P417_RegistrarRecepcionLlaves:
DELETE TFI_TAREAS_FORM_ITEMS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarRecepcionLlaves'); --3
DELETE DD_PTP_PLAZOS_TAREAS_PLAZAS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarRecepcionLlaves'); --1
DELETE TAP_TAREA_PROCEDIMIENTO WHERE TAP_CODIGO = 'P417_RegistrarRecepcionLlaves'; --1


--P417_RegistrarEnvioLlavesDepFinal:
DELETE TFI_TAREAS_FORM_ITEMS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarEnvioLlavesDepFinal'); --4
DELETE DD_PTP_PLAZOS_TAREAS_PLAZAS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarEnvioLlavesDepFinal'); --1
DELETE TAP_TAREA_PROCEDIMIENTO WHERE TAP_CODIGO = 'P417_RegistrarEnvioLlavesDepFinal'; --1


--P417_RegistrarRecepcionLlavesDepFinal:
DELETE TFI_TAREAS_FORM_ITEMS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarRecepcionLlavesDepFinal'); --3
DELETE DD_PTP_PLAZOS_TAREAS_PLAZAS WHERE TAP_ID = (select TAP_ID from TAP_TAREA_PROCEDIMIENTO where TAP_CODIGO='P417_RegistrarRecepcionLlavesDepFinal'); --1
DELETE TAP_TAREA_PROCEDIMIENTO WHERE TAP_CODIGO = 'P417_RegistrarRecepcionLlavesDepFinal'; --1






