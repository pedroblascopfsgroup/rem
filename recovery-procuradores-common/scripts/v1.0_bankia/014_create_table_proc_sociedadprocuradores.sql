ALTER TABLE BANK01.PSP_PROC_SOCI_PROCS
 DROP PRIMARY KEY CASCADE;
DROP TABLE BANK01.PSP_PROC_SOCI_PROCS CASCADE CONSTRAINTS;

CREATE TABLE BANK01.PSP_PROC_SOCI_PROCS
(
  PR_SOC_ID   NUMBER(16)                        NOT NULL,
  PRO_ID      NUMBER(16)                        NOT NULL,
  SOC_PRO_ID  NUMBER(16)                        NOT NULL
)
TABLESPACE BANK01
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX BANK01.PSP_PROC_SOCI_PROCS_PK ON BANK01.PSP_PROC_SOCI_PROCS
(PR_SOC_ID)
LOGGING
TABLESPACE BANK_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX BANK01.UNIQUE_PRO_ID_SOC_PRO_ID ON BANK01.PSP_PROC_SOCI_PROCS
(PRO_ID, SOC_PRO_ID)
LOGGING
TABLESPACE BANK_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE BANK01.PSP_PROC_SOCI_PROCS ADD (
  CONSTRAINT PSP_PROC_SOCI_PROCS_PK
 PRIMARY KEY
 (PR_SOC_ID),
  CONSTRAINT UNIQUE_PRO_ID_SOC_PRO_ID
 UNIQUE (PRO_ID, SOC_PRO_ID));

ALTER TABLE BANK01.PSP_PROC_SOCI_PROCS ADD (
  FOREIGN KEY (PRO_ID) 
 REFERENCES BANK01.PRO_PROCURADORES (PRO_ID),
  FOREIGN KEY (SOC_PRO_ID) 
 REFERENCES BANK01.SCP_SOCIEDAD_PROCURADORES (SOC_PRO_ID));
 
DROP SEQUENCE BANK01.S_PSP_PROC_SOCI_PROCS;

CREATE SEQUENCE BANK01.S_PSP_PROC_SOCI_PROCS
  START WITH 1
  MAXVALUE 9999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER;


