
set verify off;

define MASTER_SCHEMA = BANKMASTER;

-- borrar usuarios y despachos de las agencias.

delete from usd_usuarios_despachos usd where usd.des_id in (
    select des_id from des_despacho_externo where dd_tde_id = (select dd_tde_id from &MASTER_SCHEMA..dd_tde_tipo_despacho where dd_tde_codigo = 'AGER'));

commit;

delete from des_despacho_externo where dd_tde_id = (select dd_tde_id from &MASTER_SCHEMA..dd_tde_tipo_despacho where dd_tde_codigo = 'AGER');

commit;
  
delete from &MASTER_SCHEMA..usu_usuarios where usu_username in (select RCF_AGE_CODIGO from RCF_AGE_AGENCIAS);

commit;

delete from &MASTER_SCHEMA..dd_tde_tipo_despacho where dd_tde_codigo = 'AGER';

commit;

-- BORRAR TODA LA ESTRUCTURA

DROP SEQUENCE S_RCF_ESS_ESQUEMA_SIMULACION;

DROP TABLE RCF_ESS_ESQUEMA_SIMULACION;

DROP SEQUENCE S_RCF_DD_ESI_ESTADO_SIMULACION;

DROP TABLE RCF_DD_ESI_ESTADO_SIMULACION;

DROP SEQUENCE S_RDF_RECOBRO_DETALLE_FACTURA;

DROP TABLE RDF_RECOBRO_DETALLE_FACTURA;

DROP SEQUENCE  S_PFS_PROC_FAC_SUBCARTERA;

DROP TABLE PFS_PROC_FAC_SUBCARTERA;

DROP SEQUENCE  S_PRF_PROCESO_FACTURACION;

DROP TABLE PRF_PROCESO_FACTURACION;

DROP SEQUENCE  S_RCF_DD_EPF_ESTADO_PROC_FAC;

DROP TABLE RCF_DD_EPF_ESTADO_PROC_FAC;

DROP TABLE RCF_SUR_SUBCARTERA_RANKING;

DROP SEQUENCE S_RCF_SUR_SUBCARTERA_RANKING;

DROP TABLE RCF_SUA_SUBCARTERA_AGENCIAS;

DROP SEQUENCE S_RCF_SUA_SUBCARTERA_AGENCIAS;

DROP TABLE RCF_SCA_SUBCARTERA;

DROP SEQUENCE S_RCF_SCA_SUBCARTERA;

DROP SEQUENCE S_RCF_MVL_META_VOLANTE;

DROP TABLE RCF_MVL_META_VOLANTE;

DROP SEQUENCE S_RCF_ITV_ITI_METAS_VOLANTES;

DROP TABLE RCF_ITV_ITI_METAS_VOLANTES;

DROP SEQUENCE S_RCF_DD_MET_META_VOLANTE;

DROP TABLE RCF_DD_MET_META_VOLANTE;

DROP TABLE RCF_TCT_TARIF_COBRO_TRAMO;

DROP TABLE RCF_TCC_TARIFAS_CONCEP_COBRO;

DROP TABLE RCF_DD_COC_CONCEPTO_COBRO;

DROP TABLE RCF_TRF_TRAMO_FACTURACION;

DROP TABLE RCF_TCF_TIPO_COBRO_FACTURA;

-- DROP TABLE RCF_DD_TCB_TIPO_COBRO;

DROP TABLE RCF_COF_CORRECTOR_FACTURA;

DROP TABLE RCF_MFA_MODELOS_FACTURACION;

DROP TABLE RCF_DD_TCO_TIPO_CORRECTOR;

DROP SEQUENCE S_RCF_COF_CORRECTOR_FACTURA;

DROP SEQUENCE S_RCF_DD_TCO_TIPO_CORRECTOR;

DROP SEQUENCE S_RCF_TCT_TARIF_COBRO_TRAMO;

DROP SEQUENCE S_RCF_TCC_TARIFAS_CONCEP_COB;

DROP SEQUENCE S_RCF_DD_COC_CONCEPTO_COBRO;

DROP SEQUENCE S_RCF_TRF_TRAMO_FACTURACION;

DROP SEQUENCE S_RCF_TCF_TIPO_COBRO_FACTURA;

-- DROP SEQUENCE S_RCF_DD_TCB_TIPO_COBRO;

DROP SEQUENCE S_RCF_MFA_MODELOS_FACTURACION;

DROP TABLE RCF_POA_POLITICA_ACUERDOS;

DROP SEQUENCE S_RCF_POA_POLITICA_ACUERDOS;

DROP TABLE RCF_MRV_MODELO_RANKING_VARS;

DROP SEQUENCE S_RCF_MRV_MODELO_RANKING_VARS;

DROP TABLE RCF_MOR_MODELO_RANKING;

DROP SEQUENCE S_RCF_MOR_MODELO_RANKING;

DROP SEQUENCE S_RCF_PAA_POL_ACUER_PALANCAS;

DROP TABLE RCF_PAA_POL_ACUERDOS_PALANCAS;

DROP SEQUENCE S_RCF_STP_SUBTIPO_PALANCA;

DROP TABLE RCF_STP_SUBTIPO_PALANCA;

DROP SEQUENCE S_RCF_TPP_TIPO_PALANCA;

DROP TABLE RCF_TPP_TIPO_PALANCA;

DROP TABLE RCF_DD_TPR_TIPO_REPARTO_SUBC;

DROP SEQUENCE S_RCF_DD_TPR_TIPO_REPARTO_SUBC;

DROP TABLE RCF_AGE_AGENCIAS;

DROP SEQUENCE S_RCF_AGE_AGENCIAS;

DROP TABLE RCF_ESC_ESQUEMA_CARTERAS;

DROP SEQUENCE S_RCF_ESC_ESQUEMA_CARTERAS;

DROP TABLE RCF_DD_AER_AMBITO_EXP_REC;

DROP SEQUENCE S_RCF_DD_AER_AMBITO_EXP_REC;

DROP TABLE RCF_DD_TCE_TIPO_CARTERA_ESQ;

DROP SEQUENCE S_RCF_DD_TCE_TIPO_CARTERA_ESQ;

DROP TABLE RCF_DD_TGC_TIPO_GESTION_CART;

DROP SEQUENCE S_RCF_DD_TGC_TIPO_GESTION_CART;

DROP TABLE RCF_ESQ_ESQUEMA;

DROP SEQUENCE S_RCF_ESQ_ESQUEMA;

DROP TABLE RCF_DD_EES_ESTADO_ESQUEMA;

DROP SEQUENCE S_RCF_DD_EES_ESTADO_ESQUEMA;

DROP TABLE RCF_DD_MTR_MODELO_TRANSICION;

DROP SEQUENCE S_RCF_DD_MTR_MODELO_TRANSICION;

DROP TABLE RCF_CAR_CARTERA;

DROP SEQUENCE S_RCF_CAR_CARTERA;

-- tablas en desuso --

-- DROP TABLE RCF_DD_ECA_ESTADO_CARTERA;

-- DROP SEQUENCE S_RCF_DD_ECA_ESTADO_CARTERA;

----------------------

DROP TABLE RCF_DD_VAR_VARIABLES_RANKING;

DROP SEQUENCE S_RCF_DD_VAR_VARIABLES_RANKING;

DROP TABLE RCF_DD_ECM_ESTADO_COMPONENT;

DROP SEQUENCE S_RCF_DD_ECM_ESTADO_COMPONENT;

DROP TABLE REA_RECOBRO_ADJUNTOS;

DROP SEQUENCE S_REA_RECOBRO_ADJUNTOS;


delete from fun_pef fp where FP.FUN_ID in (
select fun.fun_id from &MASTER_SCHEMA..fun_funciones fun where fun.fun_descripcion in ( 
'ROLE_VER_AGENCIAS','ROLE_CONF_AGENCIAS','ROLE_VER_CARTERAS','ROLE_CONF_CARTERAS','ROLE_CONF_CARTERASESQUEMA','ROLE_CONF_REPARTOSUBCARTERAS',
'ROLE_VER_ESQUEMA','ROLE_CONF_ESQUEMA','ROLE_VER_METAS','ROLE_CONF_METAS','ROLE_VER_RANKING','ROLE_CONF_RANKING','ROLE_VER_FACTURACION','ROLE_CONF_FACTURACION',
'ROLE_VER_PROC_FACTURACION','ROLE_CONF_PROC_FACTURACION','ROLE_CONF_POLITICA','ROLE_VER_POLITICAS')
);

commit;

delete from &MASTER_SCHEMA..fun_funciones fun where fun.fun_descripcion in ( 
'ROLE_VER_AGENCIAS','ROLE_CONF_AGENCIAS','ROLE_VER_CARTERAS','ROLE_CONF_CARTERAS','ROLE_CONF_CARTERASESQUEMA','ROLE_CONF_REPARTOSUBCARTERAS',
'ROLE_VER_ESQUEMA','ROLE_CONF_ESQUEMA','ROLE_VER_METAS','ROLE_CONF_METAS','ROLE_VER_RANKING','ROLE_CONF_RANKING','ROLE_VER_FACTURACION','ROLE_CONF_FACTURACION',
'ROLE_VER_PROC_FACTURACION','ROLE_CONF_PROC_FACTURACION','ROLE_CONF_POLITICA','ROLE_VER_POLITICAS');

commit;

delete from &MASTER_SCHEMA..dd_tde_tipo_despacho where dd_tde_codigo = 'AGER';

commit;
