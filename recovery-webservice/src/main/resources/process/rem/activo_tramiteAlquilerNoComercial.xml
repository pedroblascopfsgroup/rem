<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="urn:jbpm.org:jpdl-3.2" name="activo_tramiteAlquilerNoComercial">

	<start-state name="inicio">
		<transition to="T018_DefinicionOferta"></transition>
	</start-state>
	<state name="T018_DefinicionOferta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_AnalisisBc" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	
	<state name="T018_AnalisisBc">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_AnalisisBcDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_AnalisisBcDecision" expression="#{T018_AnalisisBcDecision}">
        <transition to="Fin" name="rechaza"></transition>
        <transition to="T018_Scoring" name="renovacionNovacion"></transition>
        <transition to="T018_PbcAlquiler" name="subrogacion"></transition>
        <transition to="T018_PteClRod" name="alquilerSocialNoVulnerable"></transition>
        <transition to="T018_AnalisisTecnico" name="alquilerSocialSiVulnerableNoAnalisis"></transition>
        <transition to="T018_SolicitarGarantiasAdicionales" name="alquilerSocialSiVulnerableSiAnalisis"></transition>
	</decision>
	
	<state name="T018_Scoring">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_ScoringDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_ScoringDecision" expression="#{T018_ScoringDecision}">
        <transition to="T018_PbcAlquiler" name="resultadoOk"></transition>
        <transition to="T018_ScoringBc" name="resultadoKoConDudas"></transition>
	</decision>
	
	<state name="T018_PbcAlquiler">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_PbcAlquilerDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_PbcAlquilerDecision" expression="#{T018_PbcAlquilerDecision}">
		<transition to="Fin" name="rechaza"></transition>
        <transition to="T018_SolicitarGarantiasAdicionales" name="subrogacionAcepta"></transition>
        <transition to="T018_AnalisisTecnico" name="renovacionNovacionOrigenSubrogacion"></transition>
        <transition to="T018_ResolucionComite" name="renovacionNovacionOrigenNoSubrogacion"></transition>
	</decision>
	
	<state name="T018_ScoringBc">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_ScoringBcDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_ScoringBcDecision" expression="#{T018_ScoringBcDecision}">
		<transition to="Fin" name="rechaza"></transition>
        <transition to="T018_AnalisisTecnico" name="origenSubrogacion"></transition>
        <transition to="T018_SolicitarGarantiasAdicionales" name="origenNoSubrogacion"></transition>
	</decision>
   
   <state name="T018_AnalisisTecnico">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_ResolucionComite" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
   
   <state name="T018_ResolucionComite">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_ResolucionComiteDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_ResolucionComiteDecision" expression="#{T018_ResolucionComiteDecision}">
		<transition to="Fin" name="rechaza"></transition>
        <transition to="T018_SolicitarGarantiasAdicionales" name="aprueba"></transition>
	</decision>
   
   <state name="T018_SolicitarGarantiasAdicionales">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_TrasladarOfertaCliente" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	
	<state name="T018_PteClRod">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_PteClRodDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_PteClRodDecision" expression="#{T018_PteClRodDecision}">
		<transition to="Fin" name="rechaza"></transition>
        <transition to="T018_TrasladarOfertaCliente" name="aprueba"></transition>
	</decision>
	
	<state name="T018_TrasladarOfertaCliente">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_TrasladarOfertaClienteDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_TrasladarOfertaClienteDecision" expression="#{T018_TrasladarOfertaClienteDecision}">
		<transition to="T018_RevisionBcYCondiciones" name="rechaza"></transition>
        <transition to="T018_AgendarYFirmar" name="aprueba"></transition>
	</decision>
	
	<state name="T018_RevisionBcYCondiciones">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T018_RevisionBcYCondicionesDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	<decision name ="T018_RevisionBcYCondicionesDecision" expression="#{T018_RevisionBcYCondicionesDecision}">
		<transition to="Fin" name="rechaza"></transition>
		<transition to="T018_TrasladarOfertaCliente" name="apruebaNoVulnerable"></transition>
        <transition to="T018_SolicitarGarantiasAdicionales" name="apruebaSiVulnerable"></transition>
	</decision>
	
	<state name="T018_AgendarYFirmar">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state> 
	
	<end-state name="Fin">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>activoEndProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

</process-definition>