<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="urn:jbpm.org:jpdl-3.2" name="activo_tramiteComercialAlquiler">

	<start-state name="inicio">
		<transition to="T015_DefinicionOferta"></transition>
	</start-state>
	
	<state name="T015_DefinicionOferta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_DefinicionOfertaDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>

	<decision name ="T015_DefinicionOfertaDecision" expression="#{T015_DefinicionOfertaDecision}">
		<transition to="T015_VerificarScoring" name="verificaScoring"></transition>
		<transition to="T015_VerificarSeguroRentas" name="verificaSeguroRenta"></transition>
		<transition to="T015_ElevarASancion" name="elevarSancion"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_VerificarScoring">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_VerificarScoringDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_VerificarScoringDecision" expression="#{T015_VerificarScoringDecision}">
		<transition to="Fin" name="Rechazado"></transition>
		<transition to="T015_ElevarASancion" name="Aprobado"></transition>
		<transition to="T015_ScoringBC" name="conDudasBC"></transition>
        <transition to="T015_SolicitarGarantiasAdicionales" name="aprobadoBC"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name= "T015_VerificarSeguroRentas">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_VerificarSeguroRentasDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_VerificarSeguroRentasDecision" expression="#{T015_VerificarSeguroRentasDecision}">
		<transition to="Fin" name="Rechazado"></transition>
		<transition to="T015_ElevarASancion" name="Aprobado"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_ElevarASancion">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_ElevarASancionDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_ElevarASancionDecision" expression="#{T015_ElevarASancionDecision}">
		<transition to="Fin" name="Anular"></transition>
		<transition to="T015_ResolucionExpediente" name="Elevar"></transition>
		<transition to="T015_VerificarScoring" name="irScoringBC"></transition>
        <transition to="T015_SolicitarGarantiasAdicionales" name="solicitarGarantiasBC"></transition>
        <transition to="T015_AceptacionCliente" name="ContraofertarBC"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_ResolucionExpediente">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_ResolucionExpedienteDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_ResolucionExpedienteDecision" expression="#{T015_ResolucionExpedienteDecision}">
		<transition to="Fin" name="Anulada"></transition>
		<transition to="T015_ResolucionPBC" name="Aprobada"></transition>
		<transition to="T015_AceptacionCliente" name="Contraofertar"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_AceptacionCliente">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_AceptacionClienteDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_AceptacionClienteDecision" expression="#{T015_AceptacionClienteDecision}">
		<transition to="Fin" name="No"></transition>
		<transition to="T015_ElevarASancion" name="SiNnguna"></transition>
		<transition to="T015_VerificarScoring" name="SiScoring"></transition>
		<transition to="T015_VerificarSeguroRentas" name="SiSeguroRentas"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_ResolucionPBC">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_ResolucionPBCDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_ResolucionPBCDecision" expression="#{T015_ResolucionPBCDecision}">
		<transition to="Fin" name="Denegado"></transition>
		<transition to="T015_Posicionamiento" name="Aprobado"></transition>
		<transition to="Fin" name="Fin"></transition>
	</decision>
	
	<state name="T015_Posicionamiento">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_Firma" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<state name="T015_Firma">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_CierreContrato" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>

	<state name="T015_CierreContrato">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	<state name="T015_SolicitarGarantiasAdicionales">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_SolicitarGarantiasAdicionalesDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
	</state>
	
	<decision name ="T015_SolicitarGarantiasAdicionalesDecision" expression="#{T015_SolicitarGarantiasAdicionalesDecision}">
		<transition to="Fin" name="Anulada"></transition>
		<transition to="T015_PBC" name="OKSinDudas"></transition>
        <transition to="T015_SancionBC" name="KOSinDudas"></transition>
        <transition to="T015_SancionBC" name="OKConDudas"></transition>
        <transition to="Fin" name="KOConDudas"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>
    
    <state name="T015_ScoringBC">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_ScoringBCDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_ScoringBCDecision" expression="#{T015_ScoringBCDecision}">
		<transition to="Fin" name="Anular"></transition>
		<transition to="T015_SolicitarGarantiasAdicionales" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>

    <state name="T015_SancionBC">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_SancionBCDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_SancionBCDecision" expression="#{T015_SancionBCDecision}">
		<transition to="Fin" name="Anulada"></transition>
		<transition to="T015_PBC" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>
    <state name="T015_PBC">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_PBCDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_PBCDecision" expression="#{T015_PBCDecision}">
		<transition to="Fin" name="Anulada"></transition>
		<transition to="T015_EnvioContrato" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>

    <state name="T015_EnvioContrato">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_EnvioContratoDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_EnvioContratoDecision" expression="#{T015_EnvioContratoDecision}">
		<transition to="Fin" name="Anulada"></transition>
        <transition to="T015_SancionPatrimonio" name="KO"></transition>
        <transition to="T015_AgendarFechaFirma" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>
    

    <state name="T015_SancionPatrimonio">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_SancionPatrimonioDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_SancionPatrimonioDecision" expression="#{T015_SancionPatrimonioDecision}">
		<transition to="Fin" name="Anulada"></transition>
        <transition to="T015_EnvioContrato" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>

    <state name="T015_AgendarFechaFirma">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T015_AgendarFechaFirmaDecision" name="avanzaBPM"></transition>
		<transition to="Fin" name="Fin"></transition>
    </state>
    
    <decision name ="T015_AgendarFechaFirmaDecision" expression="#{T015_AgendarFechaFirmaDecision}">
		<transition to="Fin" name="Anulada"></transition>
        <transition to="T015_Firma" name="OK"></transition>
		<transition to="Fin" name="Fin"></transition>
    </decision>
	

	<end-state name="Fin">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>activoEndProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

	

</process-definition>