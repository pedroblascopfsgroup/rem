<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="urn:jbpm.org:jpdl-3.2" name="activo_tramiteSancionOfertaApple">

	<start-state name="inicio">
		<transition to="T017_DefinicionOferta"></transition>
	</start-state>
	<state name="T017_DefinicionOferta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_AnalisisPM" name="avanzaBPM"></transition>
	</state> <!-- Transicion directa a analisis PM-->
    <state name="T017_AnalisisPM">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_AnalisisPMDecision" name="avanzaBPM"></transition>
	</state> <!-- Transicion a Decision  3 caminos-->
    <decision name ="T017_AnalisisPMDecision" expression="#{T017_AnalisisPMDecision}">
		<transition to="T017_ResolucionCES" name="Aprueba"></transition>
        <transition to="T017_RespuestaOfertantePM" name="Contraoferta"></transition>
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!-- Decision de AnalisisPM : "ResolucionCES / Respuesta Ofertante PM-->
	    <state name="T017_RespuestaOfertantePM">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_RespuestaOfertantePMDecision" name="avanzaBPM"></transition>
	</state> <!-- Transicion a Decision  3 caminos-->
    <decision name ="T017_RespuestaOfertantePMDecision" expression="#{T017_RespuestaOfertantePMDecision}">
		<transition to="T017_ResolucionCES" name="Aprueba"></transition>
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!-- Decision de AnalisisPM : "ResolucionCES / Respuesta Ofertante PM-->
	<state name="T017_ResolucionCES">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_ResolucionCESDecision" name="avanzaBPM"></transition>
	</state> <!--Transicion a Decision 3 caminos-->
    <decision name ="T017_ResolucionCESDecision" expression="#{T017_ResolucionCESDecision}">
        <transition to="forkReservaSi" name="AceptaConReserva"></transition> 
        <transition to="forkReservaNo" name="AceptaSinReserva"></transition> 
        <transition to="T017_RespuestaOfertanteCES" name="Contraoferta"></transition>
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!--Decision Resolucion CES : "Fork :Informe Juridico / Advisory Note / PBC (Reserva/Venta) dependiendo de si tiene reserva o no"-->
		<state name="T017_RespuestaOfertanteCES">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_RespuestaOfertanteCESDecision" name="avanzaBPM"></transition>
	</state> <!--Transicion a Decision 3 caminos-->
    <decision name ="T017_RespuestaOfertanteCESDecision" expression="#{T017_RespuestaOfertanteCESDecision}">
        <transition to="forkReservaSi" name="AceptaConReserva"></transition> 
        <transition to="forkReservaNo" name="AceptaSinReserva"></transition> 
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!--Decision Resolucion CES : "Fork :Informe Juridico / Advisory Note / PBC (Reserva/Venta) dependiendo de si tiene reserva o no"-->
   
    <fork name="forkReservaSi">  
        <transition to="T017_InformeJuridico" name="informe"></transition>	
        <transition to="T017_AdvisoryNote" name="advisoryNote"></transition>
        <transition to="T017_PBCReserva" name="reserva"></transition>
    </fork><!--Fork Resolucion CES ACEPTA CON RESERVA -->
    <fork name="forkReservaNo">  
        <transition to="T017_InformeJuridico" name="informe"></transition>	
        <transition to="T017_AdvisoryNote" name="advisoryNote"></transition>
        <transition to="T017_PBCVenta" name="venta"></transition>
    </fork><!--Fork Resolucion CES ACEPTA SIN RESERVA-->
	<state name="T017_InformeJuridico">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="join1" name="avanzaBPM"></transition>
	</state> <!--Transicion directa a nodo de union --> 
    <state name="T017_AdvisoryNote">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_RecomendCES" name="avanzaBPM"></transition>
	</state> <!--Transicion directa a RecomendCES-->
    <state name="T017_RecomendCES">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_RecomendCESDecision" name="avanzaBPM"></transition>
	</state> <!--Transicion a decision T017_RecomendCESDecision -->
	<decision name ="T017_RecomendCESDecision" expression="#{T017_RecomendCESDecision}">
        <transition to="T017_ResolucionPROManzana" name="Acepta"></transition>
		<transition to="T017_ResolucionExpediente" name="DeniegaConReserva"></transition>
		<transition to="Fin" name="DeniegaSinReserva"></transition>
	</decision> <!--Decision RecomendCES Resolucion Expediente / FIN / Resolucion PRO Manzana-->
    <state name="T017_ResolucionExpediente">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					resolucionExpedienteEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="avanzaBPM"></transition>
    </state> <!--Transicion directa a Fin -->
    <state name="T017_ResolucionPROManzana">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_ResolucionPROManzanaDecision" name="avanzaBPM"></transition>
	</state> <!--Transicion a decision T017_RecomendCESDecision -->
	<decision name ="T017_ResolucionPROManzanaDecision" expression="#{T017_ResolucionPROManzanaDecision}">
        <transition to="join1" name="Acepta"></transition> <!--Nodo de union-->
        <transition to="T017_ResolucionExpediente" name="DeniegaConReserva"></transition>
		<transition to="Fin" name="DeniegaSinReservaONoExiste"></transition>
	</decision> <!--Decision Resolucion Pro Manzana Resolucion Expediente / FIN / NODO DE UNION PREGUNTAR A SOLER -->
    <state name="T017_PBCReserva">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_PBCReservaDecision" name="avanzaBPM"></transition>
	</state> <!--Transicion a decision T017_RecomendCESDecision -->
	<decision name ="T017_PBCReservaDecision" expression="#{T017_PBCReservaDecision}">
        <transition to="T017_InstruccionesReserva" name="Aprueba"></transition>
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!--Decision PBCReserva : Fin / InstruccionesReserva -->
	<state name="T017_InstruccionesReserva">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_ObtencionContratoReserva" name="avanzaBPM"></transition>
	</state> <!-- Transicion directa a Obtencion de contrato de reserva-->
	<state name="T017_ObtencionContratoReserva">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_PBCVenta" name="avanzaBPM"></transition>
	</state>
	<state name="T017_PBCVenta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_PBCVentaDecision" name="avanzaBPM"></transition>
	</state>
	<decision name ="T017_PBCVentaDecision" expression="#{T017_PBCVentaDecision}">
        <transition to="join1" name="Aprueba"></transition> <!--Nodo de union-->
		<transition to="Fin" name="Deniega"></transition>
	</decision> <!--Decision PBCReserva : Fin / InstruccionesReserva -->
    <join name="join1">
        <transition to="T017_PosicionamientoYFirma"></transition>
    </join>
    <state name="T017_PosicionamientoYFirma">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_DocsPosVenta" name="avanzaBPM"></transition>
	</state> <!--Transicion directa a documentacion pos venta -->
    <state name="T017_DocsPosVenta">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericLeaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="T017_CierreEconomico" name="avanzaBPM"></transition>
	</state> <!-- Transmision directa a Cierre Economico -->
	<state name="T017_CierreEconomico">
		<event type="node-enter">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					activoGenericEnterActionHandler
				</targetBean>
			</action>
		</event>
		<event type="node-leave">
			<action name="miTarea"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy"
				config-type="bean">
				<targetBean>
					ActivoGenericSaveActionHandler
				</targetBean>
			</action>
		</event>
		<transition to="Fin" name="avanzaBPM"></transition>
	</state> <!-- THE END -->
	<end-state name="Fin">
		<event type="node-enter">
			<action name="myAction" config-type="bean"
				class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
				<targetBean>activoEndProcessActionHandler
				</targetBean>
			</action>
		</event>
	</end-state>

</process-definition>