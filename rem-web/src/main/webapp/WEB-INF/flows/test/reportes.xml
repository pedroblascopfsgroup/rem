<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
    
    <input name="tipo" />
    <input name="reporte" />
    
    <view-state id="reportes" view="test/reportes">
    	<on-render>
    		<evaluate expression="reporte" result="flowScope.reporte" />
    		<evaluate expression="tipo" result="flowScope.tipo" />
    	</on-render>
    	<transition on="genera" to="decideVista" />	
    </view-state>
    
    <decision-state id="decideVista">
    	<on-entry>
    		 <evaluate expression="executor.execute('personaManager.getList')" result="flowScope.report_personas"/>
    	</on-entry>
    	<if then="generaPDF" test="tipo=='generaPDF'" else="generaHTML"/>
    </decision-state>
    
    <end-state id="generaPDF" view="reportPDF/personasDemo"/>
    
    <end-state id="generaHTML" view="reportHTML/personasDemo"/>

</flow>
