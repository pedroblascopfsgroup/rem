DROP SEQUENCE S_DD_INFORMES;

CREATE SEQUENCE S_DD_INFORMES;

DROP TABLE DD_INFORMES;

CREATE TABLE DD_INFORMES (
   DD_INFORME_ID                    NUMBER(16)                NOT NULL,
   DD_INFORME_CODIGO                VARCHAR2(50 BYTE),
   DD_INFORME_DESCRIPCION           VARCHAR2(50 BYTE),
   DD_INFORME_DESCRIPCION_LARGA     VARCHAR2(250 BYTE),
   CONSTRAINT PK_DD_INFORMES PRIMARY KEY (DD_INFORME_ID)
);

CREATE SEQUENCE S_PRF_PARRAFOS;

DROP TABLE PRF_PARRAFOS;

CREATE TABLE PRF_PARRAFOS (
   PRF_PARRAFO_ID                    NUMBER(16)                NOT NULL,
   PRF_PARRAFO_CODIGO                VARCHAR2(50 BYTE)	NOT NULL,
   PRF_PARRAFO_CONTENIDO	VARCHAR2(4000 BYTE),
   CONSTRAINT PK_PAR_PARRAFOS PRIMARY KEY (PRF_PARRAFO_ID)
);

CREATE UNIQUE INDEX PK_PRF_PARRAFOS1 ON PRF_PARRAFOS(PRF_PARRAFO_CODIGO);

DROP TABLE IPA_INFORME_PARRAFOS;

CREATE TABLE IPA_INFORME_PARRAFOS (
	DD_INFORME_ID	NUMBER(16) NOT NULL,
	PRF_PARRAFO_ID	NUMBER(16) NOT NULL,
	CONSTRAINT PK_IPA_INFORME_PARRAFOS PRIMARY KEY (DD_INFORME_ID, PRF_PARRAFO_ID)
);

CREATE SEQUENCE S_VBL_VARIABLES;

DROP TABLE VBL_VARIABLES;

CREATE TABLE VBL_VARIABLES (
	VBL_ID	NUMBER(16) NOT NULL,
	VBL_CODIGO VARCHAR2(50 BYTE)	NOT NULL,
	CONSTRAINT PK_VBL_VARIABLES PRIMARY KEY (VBL_ID)
);

CREATE UNIQUE INDEX PK_PRF_PARRAFOS1 ON PRF_PARRAFOS(PRF_PARRAFO_CODIGO);

DROP TABLE PVB_PARRAFOS_VARIABLES;

CREATE TABLE PVB_PARRAFOS_VARIABLES (
	PRF_PARRAFO_ID	NUMBER(16) NOT NULL,
	VBL_ID	NUMBER(16) NOT NULL,
	CONSTRAINT PK_PVB_PARRAFOS_VARIABLES PRIMARY KEY (PRF_PARRAFO_ID, VBL_ID)
);

// Inserción de los datos del informe 1

INSERT INTO DD_INFORMES VALUES (1, 'APORTACION_CERT_DEUDA_SIN_PROC',
	'ap_cert_deuda_sin.jrxml',
	'Aportación Certificación de Deuda sin Procurador');
    
INSERT INTO  PRF_PARRAFOS VALUES (1, 'encabezado', 'AL <juzgado> DE <plaza>');
INSERT INTO  PRF_PARRAFOS VALUES (2, 'parrafo1', 'Don <representante>, en nombre y representación de <creditor>, cuya representación tengo acreditada en los presentes Autos de Procedimiento <tipoprocedimiento> <auto> seguidos a instancias de mi representado contra <demandado>, ante el juzgado comparezco y como mejor proceda en Derecho DIGO:');
INSERT INTO  PRF_PARRAFOS VALUES (3, 'parrafo2', 'Que dando cumplimiento al requerimiento efectuado por providencia de fecha <fechaprovidencia>, adjunto acompaño documento <numdocumento>, correspondiente a la Certificación de la deuda.');
INSERT INTO  PRF_PARRAFOS VALUES (4, 'parrafo3', 'En virtud de lo expuesto,');
INSERT INTO  PRF_PARRAFOS VALUES (5, 'parrafo4', 'PIDO AL JUZGADO que tenga por presentado este escrito se sirva admitirlo, tenga por cursadas las
manifestaciones en él contadas y acceda a lo solicitado en el cuerpo del mismo.');
INSERT INTO  PRF_PARRAFOS VALUES (6, 'prefirma', 'Es Justicia que pido en <plaza> a <fecha>');
INSERT INTO  PRF_PARRAFOS VALUES (7, 'firma', '<representante>');

INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 1);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 2);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 3);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 4);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 5);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 6);
INSERT INTO IPA_INFORME_PARRAFOS VALUES (1, 7);

INSERT INTO VBL_VARIABLES VALUES (1, 'juzgado');
INSERT INTO VBL_VARIABLES VALUES (2, 'plaza');
INSERT INTO VBL_VARIABLES VALUES (3, 'representante');
INSERT INTO VBL_VARIABLES VALUES (4, 'creditor');
INSERT INTO VBL_VARIABLES VALUES (5, 'tipoprocedimiento');
INSERT INTO VBL_VARIABLES VALUES (6, 'auto');
INSERT INTO VBL_VARIABLES VALUES (7, 'demandado');
INSERT INTO VBL_VARIABLES VALUES (8, 'fechaprovidencia');
INSERT INTO VBL_VARIABLES VALUES (9, 'numdocumento');
INSERT INTO VBL_VARIABLES VALUES (10, 'fecha');

INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (1, 1);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (1, 2);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (2, 3);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (2, 4);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (2, 5);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (2, 6);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (2, 7);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (3, 8);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (3, 9);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (6, 2);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (6, 10);
INSERT INTO PVB_PARRAFOS_VARIABLES VALUES (7, 3);

COMMIT;

// Inserción de datos de configuración de informes

DROP TABLE CFI_CONFIGURACION_INFORMES;

CREATE TABLE CFI_CONFIGURACION_INFORMES (
	CFI_CODIGO VARCHAR2(50 BYTE),
	CFI_VALOR VARCHAR2(500 BYTE),
	CONSTRAINT PK_CFI_CONFIGURACION_INFORMES PRIMARY KEY (CFI_CODIGO)
);

INSERT INTO CFI_CONFIGURACION_INFORMES VALUES ('representante', 'LUIS REPRESENTANTE REPRESENTANTE');
INSERT INTO CFI_CONFIGURACION_INFORMES VALUES ('porcentaje_provision', '30');
INSERT INTO CFI_CONFIGURACION_INFORMES VALUES ('direccion_letrada', 'DON RAMON MARQUEZ MORENO - ICAM 73021');
INSERT INTO CFI_CONFIGURACION_INFORMES VALUES ('numfax', '902044243');
INSERT INTO CFI_CONFIGURACION_INFORMES VALUES ('email', 'contencioso@lindorff.es');

COMMIT;



ALTER TABLE LIN001.ADA_ADJUNTOS_ASUNTOS DROP COLUMN DTYPE;

ALTER TABLE LIN001.ADA_ADJUNTOS_ASUNTOS ADD 
  DTYPE                VARCHAR2(100 CHAR)       DEFAULT 'EXTAdjuntoAsunto'   NOT NULL;