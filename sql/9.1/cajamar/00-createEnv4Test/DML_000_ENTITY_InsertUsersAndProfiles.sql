/*
perfiles
*/
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de oficina','Oficina','0','SAG',sysdate,null,null,null,null,'0','OFI_OFICINA','0','EXTPerfil');
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de Gestor de riesgos','Gestor de riesgos','0','SAG',sysdate,null,null,null,null,'0','GES_RIESGOS','0','EXTPerfil');
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de Director de riesgos','Director de riesgos','0','SAG',sysdate,null,null,null,null,'0','DIR_RIESGOS','0','EXTPerfil');
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de Servicios centrales','Servicios centrales','0','SAG',sysdate,null,null,null,null,'0','SER_CENTRALES','0','EXTPerfil');
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de Comite de oficina','Comite oficina','0','SAG',sysdate,null,null,null,null,'0','COM_OFICINA','0','EXTPerfil');
Insert into  CM01.PEF_PERFILES (PEF_ID,PEF_DESCRIPCION_LARGA,PEF_DESCRIPCION,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,PEF_CODIGO,PEF_ES_CARTERIZADO,DTYPE) 
values 
(S_PEF_PERFILES.nextval,'Acceso a las funcionalidades de Comite de banco','Comite banco','0','SAG',sysdate,null,null,null,null,'0','COM_BANCO','0','EXTPerfil');


--'Oficina'
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Oficina') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );
   
--  'Gestor de riesgos' 
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Gestor de riesgos') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );

-- 'Director de riesgos'  
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Director de riesgos') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );
 
-- 'Servicios centrales'   
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Servicios centrales') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );
 
--'Comite oficina'
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Comite oficina') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );
    
--'Comite banco'
INSERT INTO CM01.FUN_PEF (FP_ID,PEF_ID,FUN_ID,USUARIOCREAR,FECHACREAR) 
select CMMASTER.S_FUN_FUNCIONES.nextval,
      (SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Comite banco') pef_id,
      fun_id,
      'SYS',
      sysdate
from     
    (SELECT fun.fun_id FROM CMMASTER.FUN_FUNCIONES fun
        WHERE fun.FUN_DESCRIPCION IN ( 'MENU-LIST-CLI', 'MENU-LIST-EXP', 'MENU-LIST-ASU', 'BUSQUEDA', 'EDITAR_TITULOS', 'EDITAR_GYA', 'NUEVO_TITULO', 'BORRA_TITULO', 'SOLICITAR_PRORROGA', 'SOLICITAR_EXP_MANUAL', 'EXCLUIR_CLIENTES', 'MENU-LIST-CNT', 'EDITAR_GYA_REV', 'TAB-CNT-EXP-ASU', 'SOLICITAR_EXP_MANUAL_SEG', 'VER-OBSERVACIONES-ASUNTO', 'BUSCAR-TAREAS', 'SECCION_BIENES_EN_CONTRATO', 'BUSCAR-BIENES', 'TAB_CLIENTE_CONTRATOS', 'TAB_CLIENTE_CABECERA', 'TAB_CLIENTE_DATOS', 'TAB_CLIENTE_GRUPO', 'TAB_CLIENTE_HISTORICOS', 'CREAR_ANOTACIONES', 'OPTIMIZACION_BUZON_TAREAS', 'TAB_CONTRATO_RECIBOS', 'MENU_BUSQUEDAS_GENERAL', 'TAB_COBROS_PAGOS_EXP', 'TAB_CLIENTE_CIRBE', 'EXPORTAR_PDF_EXPEDIENTE', 'BUSCAR-SUBASTAS', 'TAB_TITULOS_EXPEDIENTE' )
    );
    
/*
Usuarios
*/
Insert into CMMASTER.usu_usuarios (USU_ID,ENTIDAD_ID,USU_USERNAME,USU_PASSWORD,USU_NOMBRE,USU_APELLIDO1,USU_APELLIDO2,USU_TELEFONO,USU_MAIL,
            VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,USU_EXTERNO,USU_FECHA_VIGENCIA_PASS,USU_GRUPO,USU_FECHA_EXTRACCION,USU_BAJA_LDAP) 
  values (CMMASTER.S_USU_USUARIOS.nextval,'1','dirriesgo1','1234','Director','Riesgos','Uno',null,'','0','JSV',sysdate,null,null,null,null,'0','0',sysdate + 90,'0',null,null);

Insert into CMMASTER.usu_usuarios (USU_ID,ENTIDAD_ID,USU_USERNAME,USU_PASSWORD,USU_NOMBRE,USU_APELLIDO1,USU_APELLIDO2,USU_TELEFONO,USU_MAIL,
            VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,USU_EXTERNO,USU_FECHA_VIGENCIA_PASS,USU_GRUPO,USU_FECHA_EXTRACCION,USU_BAJA_LDAP) 
  values (CMMASTER.S_USU_USUARIOS.nextval,'1','gesriesgo1','1234','Gestor','Riesgos','Uno',null,'','0','JSV',sysdate,null,null,null,null,'0','0',sysdate+90,'0',null,null);

Insert into CMMASTER.usu_usuarios (USU_ID,ENTIDAD_ID,USU_USERNAME,USU_PASSWORD,USU_NOMBRE,USU_APELLIDO1,USU_APELLIDO2,USU_TELEFONO,USU_MAIL,
            VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,USU_EXTERNO,USU_FECHA_VIGENCIA_PASS,USU_GRUPO,USU_FECHA_EXTRACCION,USU_BAJA_LDAP) 
    values (CMMASTER.S_USU_USUARIOS.nextval,'1','oficina_1','1234','Oficina','Uno',null,null,null,'0','JSV',sysdate,null,null,null,null,'0','0',sysdate+90,'0',null,null);


/*
ZONA
*/
Insert into CM01.ZON_PEF_USU (ZON_ID,PEF_ID,USU_ID,ZPU_ID,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,ZPU_FECHA_EXTRACCION) 
    values (
    (select max(ZON_ID) from CM01.ZON_ZONIFICACION where ZON_COD = '01')
    ,(SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Oficina')
    ,(select usu_id from CMMASTER.usu_usuarios where usu_username = 'oficina_1')
    ,S_ZON_PEF_USU.nextval
    ,'0','JSV',sysdate,null,null,null,null,'0',null);

Insert into CM01.ZON_PEF_USU (ZON_ID,PEF_ID,USU_ID,ZPU_ID,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,ZPU_FECHA_EXTRACCION) 
    values (
    (select max(ZON_ID) from CM01.ZON_ZONIFICACION where ZON_COD = '01')
    ,(SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Gestor de riesgos')
    ,(select usu_id from CMMASTER.usu_usuarios where usu_username = 'gesriesgo1')
    ,S_ZON_PEF_USU.nextval,
    '0','JSV',sysdate,null,null,null,null,'0',null);

Insert into CM01.ZON_PEF_USU (ZON_ID,PEF_ID,USU_ID,ZPU_ID,VERSION,USUARIOCREAR,FECHACREAR,USUARIOMODIFICAR,FECHAMODIFICAR,USUARIOBORRAR,FECHABORRAR,BORRADO,ZPU_FECHA_EXTRACCION) 
    values (
    (select max(ZON_ID) from CM01.ZON_ZONIFICACION where ZON_COD = '01')
    ,(SELECT PEF_ID from CM01.PEF_PERFILES  WHERE PEF_DESCRIPCION = 'Director de riesgos')
    ,(select usu_id from CMMASTER.usu_usuarios where usu_username = 'dirriesgo1')
    ,S_ZON_PEF_USU.nextval
    ,'0','JSV',sysdate,null,null,null,null,'0',null);


COMMIT;