--/*
--##########################################
--## AUTOR=Lara Pablo
--## FECHA_CREACION=20220804
--## ARTEFACTO=online
--## VERSION_ARTEFACTO=9.3
--## INCIDENCIA_LINK=HREOS-17749
--## PRODUCTO=NO
--##
--## Finalidad: Avanzar trámite a tarea concreta
--## INSTRUCCIONES:
--## VERSIONES:
--##        0.1 Versión inicial
--##########################################
--*/

WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET SERVEROUTPUT ON; 
SET DEFINE OFF;

DECLARE
   
    V_ESQUEMA VARCHAR2(25 CHAR) := '#ESQUEMA#';-- '#ESQUEMA#'; -- Configuracion Esquema
    V_ESQUEMA_M VARCHAR2(25 CHAR) := '#ESQUEMA_MASTER#';-- '#ESQUEMA_MASTER#'; -- Configuracion Esquema Master
    ERR_NUM NUMBER;-- Numero de errores
    ERR_MSG VARCHAR2(2048);-- Mensaje de error;
    PL_OUTPUT VARCHAR2(20000 CHAR);
    V_NUM_TABLAS NUMBER;
    V_ECO_ID NUMBER(16,0);
    V_NUM_ECO NUMBER;
    V_COS_ID NUMBER(16,0);
    V_USUARIO VARCHAR2(25 CHAR) := 'HREOS-17749';
    V_ECO_NUM VARCHAR(50 CHAR); -- Vble. que almacena el num de expediente
    V_CONTADOR NUMBER(16,0) := 1;
    ECO_NUM_EXPEDIENTE VARCHAR2(50);-- ECO_NUM_EXPEDIENTE;

    
BEGIN
	
	DBMS_OUTPUT.PUT_LINE('[INFO]: AVANZAR TRAMITE DE EXPEDIENTE '|| ECO_NUM_EXPEDIENTE);
	REM01.AVANCE_TRAMITE(V_USUARIO,'314362
, 315055
, 318406
, 318607
, 318818
, 318846
, 317113
, 313753
, 316696
, 318416
, 316944
, 316367
, 310019
, 309382
, 314459
, 315315
, 316718
, 314353
, 314888
, 315745
, 317050
, 319859
, 315612
, 315608
, 315614
, 317204
, 315838
, 317330
, 319637
, 313139
, 316756
, 314486
, 313646
, 315906
, 316270
, 317345
, 318999
, 318882
, 313476
, 313678
, 319820
, 318542
, 318948
, 319043
, 319432
, 318359
, 318704
, 319296
, 319638
, 316674
, 315202
, 310948
, 317053
, 313505
, 315696
, 315620
, 316291
, 314848
, 314751
, 315181
, 314142
, 318936
, 312608
, 310759
, 317342
, 314956
, 310055
, 316506
, 312762
, 316118
, 316864
, 319699
, 314723
, 314308
, 319332
, 308292
, 319052
, 318714
, 309396
, 313517
, 313573
, 316260
, 291402
, 319720
, 314897
, 315847
, 317333
, 316954
, 319232
, 319212
, 319327
, 317006
, 316970
, 308121
, 313376
, 316134
, 307841
, 315271
, 316809
, 317385
, 319220
, 319244
, 315919
, 316293
, 317357
, 317372
, 318348
, 306529
, 301310
, 314865
, 318471
, 312819
, 318377
, 319474
, 316634
, 314834
, 317018
, 318641
, 309165
, 317291
, 316149
, 316711
, 318358
, 309320
, 319730
, 317441
, 317488
, 318721
, 315083
, 313961
, 313130
, 316700
, 319235
, 316679
, 316811
, 312647
, 317078
, 316939
, 317202
, 317206
, 318862
, 318452
, 319773','T017_InstruccionesReserva', null, null, PL_OUTPUT);
	DBMS_OUTPUT.PUT_LINE(PL_OUTPUT);
	DBMS_OUTPUT.PUT_LINE('[INFO]: Nº EXPEDIENTES AVANZADOS '|| V_CONTADOR);


	COMMIT;
EXCEPTION
     WHEN OTHERS THEN
          err_num := SQLCODE;
          err_msg := SQLERRM;

          DBMS_OUTPUT.put_line('[ERROR] Se ha producido un error en la ejecución:'||TO_CHAR(err_num));
          DBMS_OUTPUT.put_line('-----------------------------------------------------------'); 
          DBMS_OUTPUT.put_line(err_msg);

          ROLLBACK;
          RAISE;          

END;

/

EXIT
