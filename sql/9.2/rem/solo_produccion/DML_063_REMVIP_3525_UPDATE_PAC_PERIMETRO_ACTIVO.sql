--/*
--##########################################
--## AUTOR=Viorel Remus Ovidiu
--## FECHA_CREACION=20190305
--## ARTEFACTO=online
--## VERSION_ARTEFACTO=9.2
--## INCIDENCIA_LINK=REMVIP-3525
--## PRODUCTO=NO
--##
--## Finalidad:  
--## INSTRUCCIONES:
--## VERSIONES:
--##        0.1 Versión inicial
--##########################################
--*/

WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET SERVEROUTPUT ON;
SET DEFINE OFF;


DECLARE
    V_SQL VARCHAR2(32000 CHAR); -- Sentencia a ejecutar         
    V_ESQUEMA VARCHAR2(25 CHAR):= '#ESQUEMA#'; -- Configuracion Esquema
    V_ESQUEMA_M VARCHAR2(25 CHAR):= '#ESQUEMA_MASTER#'; -- Configuracion Esquema Master
    V_TABLA VARCHAR2(25 CHAR):= 'ECO_EXPEDIENTE_COMERCIAL';
    V_COUNT NUMBER(16); -- Vble. para contar.
    V_COUNT_INSERT NUMBER(16):= 0; -- Vble. para contar inserts
    ERR_NUM NUMBER(25);  -- Vble. auxiliar para registrar errores en el script.
    ERR_MSG VARCHAR2(1024 CHAR); -- Vble. auxiliar para registrar errores en el script.
    V_USUARIO VARCHAR2(32 CHAR):= 'REMVIP-3525';
    PL_OUTPUT VARCHAR2(32000 CHAR);
    
    
 BEGIN

    		V_SQL := 'UPDATE REM01.ACT_PAC_PERIMETRO_ACTIVO PAC SET PAC_CHECK_FORMALIZAR = 1, 
                                                PAC.PAC_CHECK_COMERCIALIZAR = 1, 
                                                FECHAMODIFICAR = SYSDATE, 
                                                USUARIOMODIFICAR = ''REMVIP-3525'' 
                                                WHERE ACT_ID IN (SELECT ACT_ID FROM REM01.ACT_ACTIVO WHERE ACT_NUM_ACTIVO IN (5935865,
																5943207,
																6797133,
																5927528,
																5967026,
																6827373,
																6827372,
																6827338,
																6827375,
																6827367,
																6827382,
																6827347,
																6827346,
																6827339,
																6827353,
																5947375,
																5966672,
																5969216,
																5969216,
																6827371,
																6827423,
																6827417,
																6827401,
																6827420,
																6813165,
																6045501,
																5958042,
																7004891,
																5965348,
																6063616,
																6990038,
																5953387,
																7014882,
																6849915,
																5947916,
																5932494,
																6797133,
																5968574,
																5935711,
																6827342,
																6827375,
																6827351,
																6827368,
																6827368,
																6827382,
																6827347,
																6827341,
																6827339,
																6129201,
																6824700,
																6827349,
																6827337,
																6827437,
																6827443,
																6827390,
																6827439,
																6827439,
																6827402,
																5941474,
																5955019,
																6999544,
																6849320,
																6876145,
																6949103,
																5932828,
																5932828,
																6772878,
																5943207,
																6045502,
																5949151,
																5966115,
																5954526,
																5968574,
																5935711,
																5945038,
																6827374,
																6827366,
																6827366,
																6827358,
																6827357,
																6827362,
																6827360,
																6827385,
																6827409,
																6827436,
																6827413,
																6133023,
																5969495,
																5925073,
																5931461,
																6128874,
																5949679,
																5942686,
																5941531,
																5929221,
																5947916,
																5932494,
																5943207,
																5949151,
																6827342,
																6827380,
																6827365,
																6827336,
																6827343,
																5970118,
																6129201,
																6827349,
																6827344,
																6827441,
																6827437,
																6827385,
																6827401,
																6827409,
																6827413,
																6827393,
																6827400,
																6827370,
																5951557,
																5928571,
																5931461,
																5960924,
																6826912,
																5933062,
																5933062,
																5930016,
																6988828,
																7000957,
																5929221,
																5960514,
																5943574,
																5940343,
																5967026,
																5945038,
																6827374,
																6827336,
																6824700,
																6827363,
																6827423,
																6827381,
																6827417,
																6827406,
																6827408,
																6827400,
																6813165,
																5969495,
																6850626,
																6765129,
																6995508,
																6964645,
																6849915,
																5935865,
																5947916,
																5960514,
																5940343,
																5954526,
																6827372,
																6827365,
																6827343,
																5947375,
																5957049,
																5966672,
																5963872,
																6827348,
																6827357,
																6827369,
																6827356,
																6827345,
																6827360,
																6827363,
																6827394,
																6827394,
																6827387,
																6827387,
																6827406,
																6827378,
																6827378,
																6827408,
																6827377,
																5928571,
																5933587,
																7004891,
																5942167,
																5960711,
																5941214,
																5962657,
																5959651,
																6988853,
																6988967,
																6988557,
																6876145,
																7014882,
																5932494,
																6797133,
																5927528,
																6827338,
																6827355,
																6827355,
																6827380,
																6827367,
																6827351,
																6827350,
																6827350,
																6827341,
																6827358,
																6827353,
																5970118,
																5951604,
																5951604,
																5970127,
																6827348,
																6827362,
																6827369,
																6827356,
																6827345,
																6827441,
																6827436,
																6827438,
																6827393,
																6827402,
																6827420,
																5951557,
																5925073,
																5960924,
																6850626,
																5936848,
																6826912,
																5944129,
																5967690,
																5930444,
																6988852,
																7014882,
																6949103,
																6772878,
																5960514,
																5943574,
																6045502,
																5966115,
																6827373,
																6827346,
																6827359,
																6827359,
																5957049,
																5928997,
																5958813,
																5958813,
																5970127,
																5963872,
																6827371,
																6827344,
																6827361,
																6827361,
																6827337,
																6827381,
																6827443,
																6827390,
																6827438,
																6045501,
																5927048,
																6051919,
																5942167,
																5955019,
																6849320))';	  
	
  EXECUTE IMMEDIATE V_SQL;
  DBMS_OUTPUT.PUT_LINE('[INFO]: '||SQL%ROWCOUNT||' registros ACTUALIZADOS');

 COMMIT;
 
EXCEPTION
     WHEN OTHERS THEN
          ERR_NUM := SQLCODE;
          ERR_MSG := SQLERRM;
          DBMS_OUTPUT.PUT_LINE('[ERROR] Se ha producido un error en la ejecución:'||TO_CHAR(ERR_NUM));
          DBMS_OUTPUT.PUT_LINE('-----------------------------------------------------------'); 
          DBMS_OUTPUT.PUT_LINE(ERR_MSG);
          ROLLBACK;
          RAISE;   
END;
/
EXIT;

