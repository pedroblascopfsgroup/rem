--/*
--#########################################
--## AUTOR=Viorel Remus Ovidiu
--## FECHA_CREACION=202000319
--## ARTEFACTO=batch
--## VERSION_ARTEFACTO=9.3
--## INCIDENCIA_LINK=REMVIP-6722
--## PRODUCTO=NO
--## 
--## Finalidad: 
--##			
--## INSTRUCCIONES:  
--## VERSIONES:
--##        0.1 Versión inicial
--#########################################
--*/

--Para permitir la visualización de texto en un bloque PL/SQL utilizando DBMS_OUTPUT.PUT_LINE

WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET SERVEROUTPUT ON;
SET DEFINE OFF;

DECLARE
   ERR_NUM NUMBER(25);  -- Vble. auxiliar para registrar errores en el script.
   ERR_MSG VARCHAR2(1024 CHAR); -- Vble. auxiliar para registrar errores en el script.
   V_ESQUEMA VARCHAR2(25 CHAR):= '#ESQUEMA#'; -- Configuracion Esquema
   V_ESQUEMA_M VARCHAR2(25 CHAR):= '#ESQUEMA_MASTER#'; -- Configuracion Esquema Master
   V_USUARIOMODIFICAR VARCHAR(100 CHAR):= 'REMVIP-6722';
   V_SQL VARCHAR2(4000 CHAR);	
   V_PAR VARCHAR( 32000 CHAR );
   V_RET VARCHAR( 1024 CHAR );  
  
BEGIN
  
   DBMS_OUTPUT.put_line('[INICIO]');

-----------------------------------------------------------------------------------------------------------------      

   V_PAR := '11363186,
11363187,
11282873,
11282874,
11282875,
11282876,
11354645,
11354220,
11354221,
11360691,
11360179,
11360219,
11360220,
11360221,
11360226,
11360227,
11360228,
11360229,
11360418,
11360421,
11363202,
11363203,
11363205,
11363206,
11363207,
11363208,
11363209,
11363210,
11363211,
11363212,
11378715,
11378716,
11378717,
11378718,
11378719,
11378720,
11378721,
11378722,
11378723,
11378724,
11378725,
11378726,
11378727,
11378728,
11378729,
11378730,
11378731,
11378732,
11378733,
11378734,
11378735,
11378736,
11378737,
11378738,
11378739,
11378740,
11378741,
11378742,
11378743,
11378744,
11303184,
11303185,
11303186,
11303187,
11303188,
11303189,
11303190,
11303191,
11303192,
11303193,
11303194,
11303195,
11303196,
11303197,
11303198,
11359602,
11359603,
11359604,
11359605,
11359606,
11359613,
11359614,
11282757,
11282758,
11282759,
11282760,
11282761,
11379775,
11379776,
11379808,
11379809,
11379810,
11379811,
11379812,
11379813,
11379814,
11379815,
11379816,
11379817,
11379818,
11379819,
11379820,
11379821,
11379822,
11379823,
11379824,
11379825,
11379826,
11379827,
11379828,
11379829,
11379830,
11379831,
11379832,
11379833,
11379834,
11379835,
11379836,
11379837,
11379838,
11379839,
11379840,
11379841,
11379842,
11379843,
11379845,
11379846,
11379847,
11379848,
11379849,
11379850,
11379851,
11379852,
11379853,
11379854,
11379855,
11379856,
11379857,
11379858,
11379859,
11379860,
11379861,
11379862,
11379863,
11379864,
11379865,
11379866,
11379867,
11379868,
11379869,
11379870,
11379871,
11379872,
11379873,
11379777,
11379778,
11379779,
11379780,
11379781,
11379782,
11379783,
11379784,
11379785,
11379786,
11379787,
11379788,
11379789,
11379790,
11379791,
11379792,
11379793,
11379794,
11379795,
11379796,
11379797,
11379798,
11379799,
11379800,
11379801,
11379802,
11379803,
11379804,
11379805,
11379806,
11379807,
11378756,
11378757,
11378758,
11378759,
11378760,
11378761,
11378762,
11378763,
11378764,
11379115,
11379117,
11379119,
11355539,
11355073,
11355074,
11355075,
11355076,
11355077,
11355078,
11355079,
11355080,
11355081,
11355082,
11355083,
11355084,
11355085,
11355086,
11278333,
11278334,
11278335,
11278336,
11278337,
11278338,
11278339,
11278340,
11278341,
11278342,
11278343,
11278344,
11278345,
11278346,
11278685,
11360103,
11360104,
11360109,
11360759,
11278287,
11278205,
11278206,
11278207,
11360681,
11360474,
11266896,
11266971,
11354239,
11354240,
11354241,
11354242,
11360608,
11360611,
11360664,
11307178,
11359617,
11359618,
11359619,
11359621,
11359622,
11359623,
11359624,
11359630,
11359651,
11360391,
11266845,
11266383,
11266384,
11266385,
11266386,
11266387,
11266388,
11266389,
11266394,
11266408,
11363198,
11363199,
11363200,
11363201,
11259663,
11259664,
11282611,
11282612,
9450695,
9450696,
11359608,
11359646,
11359647,
11359648,
11266377,
11266404,
11266405,
11266406,
11360689,
11360182,
11360183,
11363347,
11363348,
11259447,
11259448,
11282931,
11282932,
11364666,
11364812,
11364813,
11364814,
11364815,
11364816,
11364817,
11364818,
11364819,
11364820,
11364632,
11364633,
11364636,
11364637,
11364638,
11364639,
11364640,
11364641,
11364642,
11269870,
11269871,
11269874,
11269875,
11269876,
11269877,
11269878,
11269879,
11269880,
11269904,
11270053,
11270054,
11270055,
11270056,
11270057,
11270058,
11270059,
11270060,
11270061,
11358740,
11359986,
11266582,
11266031,
11363516,
11363517,
11363331,
11363334,
11326758,
11326839,
11355561,
11355562,
11355568,
11355569,
11355570,
11355571,
11355572
';	
   REM01.SP_EXT_REENVIO_GASTO ( V_PAR , V_USUARIOMODIFICAR, V_RET );

-----------------------------------------------------------------------------------------------------------------

   DBMS_OUTPUT.PUT_LINE( V_RET );
   DBMS_OUTPUT.PUT_LINE(' [INFO] Reenviado gastos ');
   DBMS_OUTPUT.PUT_LINE('[FIN] ');
    
   COMMIT;

EXCEPTION
   WHEN OTHERS THEN
        ERR_NUM := SQLCODE;
        ERR_MSG := SQLERRM;
        DBMS_OUTPUT.put_line('[ERROR] Se ha producido un error en la ejecución:'||TO_CHAR(ERR_NUM));
        DBMS_OUTPUT.put_line('-----------------------------------------------------------'); 
        DBMS_OUTPUT.put_line(ERR_MSG);
        ROLLBACK;
        RAISE;   
END;
/
EXIT;
