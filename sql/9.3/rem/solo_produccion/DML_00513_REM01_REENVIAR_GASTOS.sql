--/*
--#########################################
--## AUTOR=Juan Bautista Alfonso Canovas
--## FECHA_CREACION=20201103
--## ARTEFACTO=batch
--## VERSION_ARTEFACTO=9.3
--## INCIDENCIA_LINK=REMVIP-8295
--## PRODUCTO=NO
--## 
--## Finalidad: 
--##			
--## INSTRUCCIONES:  
--## VERSIONES:
--##        0.1 Versión inicial
--#########################################
--*/

--Para permitir la visualización de texto en un bloque PL/SQL utilizando DBMS_OUTPUT.PUT_LINE

WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET SERVEROUTPUT ON;
SET DEFINE OFF;

DECLARE
   ERR_NUM NUMBER(25);  -- Vble. auxiliar para registrar errores en el script.
   ERR_MSG VARCHAR2(1024 CHAR); -- Vble. auxiliar para registrar errores en el script.
   V_ESQUEMA VARCHAR2(25 CHAR):= '#ESQUEMA#'; -- Configuracion Esquema
   V_ESQUEMA_M VARCHAR2(25 CHAR):= '#ESQUEMA_MASTER#'; -- Configuracion Esquema Master
   V_USUARIOMODIFICAR VARCHAR(100 CHAR):= 'REMVIP-8295';
   V_SQL VARCHAR2(4000 CHAR);	
   V_PAR VARCHAR( 3000 CHAR );
   V_RET VARCHAR( 3000 CHAR );  
  
BEGIN
  
   DBMS_OUTPUT.put_line('[INICIO]');

-----------------------------------------------------------------------------------------------------------------      

   V_PAR := '11990252,
12073974,
12073982,
12074120,
12074121,
12074139,
12074452,
12074485,
12074614,
12074628,
12074808,
12082593,
12155969,
12155970,
12155971,
12155999,
12156000,
12156188,
12156189,
12156190,
12156301,
12156302,
12156352,
12156353,
12156354,
12156355,
12156376,
12156377,
12156378,
12156608,
12156609,
12156610,
12156653,
12156654,
12156655,
12158479,
12158480,
12158481,
12158482,
12158483,
12158484,
12158679,
12158680,
12187449,
12191027,
12191033,
12191035,
12191037,
12191039,
12191041,
12191043,
12275514,
12275972,
12304761,
12311706,
12311707,
12311708,
12311709,
12311710,
12311711,
12311712,
12311713,
12311714,
12311715,
12318633,
12319545,
12319547,
12319550,
12319551,
12328162,
12328163,
12328171,
12328173,
12328177,
12328178,
12328188,
12328189,
12328190,
12328199,
12328202,
12328206,
12328208,
12328213,
12328214,
12328215,
12328217,
12328222,
12328224,
12328229,
12328233,
12328242,
12328245,
12328254,
12328255,
12328256,
12328262,
12328334,
12328346,
12328367,
12328368,
12328378,
12328389,
12328402,
12328410,
12328411,
12328414,
12328418,
12328419,
12328425,
12328430,
12328437,
12328438,
12328441,
12328442,
12328446,
12329632,
12329633,
12329634,
12329635,
12329636,
12329637,
12329638,
12329639,
12329642,
12329643,
12329644,
12329751,
12329752,
12329753,
12329760,
12329761,
12329762,
12329763,
12329764,
12329765,
12329766,
12329767,
12329768,
12329769,
12329770,
12329771,
12329772,
12329773,
12329774,
12329775,
12329776,
12329777,
12329778,
12329779,
12329780,
12329781,
12329782,
12329783,
12329784,
12329785,
12329786,
12329787,
12329796,
12329797,
12329798,
12329799,
12329800,
12329801,
12329802,
12329803,
12329804,
12329805,
12329806,
12329809,
12329810,
12329811,
12329812,
12329813,
12329814,
12329818,
12329819,
12329820,
12329821,
12329822,
12329823,
12329824,
12329825,
12329826,
12329827,
12329828,
12329832,
12329833,
12329834,
12329835,
12329836,
12329837,
12329838,
12329839,
12329840,
12329841,
12329842,
12329843,
12329844,
12329845,
12329846,
12329847,
12329848,
12329849,
12329850,
12329851,
12329852,
12329853,
12329854,
12329855,
12329856,
12329857,
12329858,
12329859,
12329860,
12329861,
12329862,
12329863,
12329864,
12329865,
12329866,
12329867,
12329868,
12329869,
12329870,
12329871,
12329872,
12329873,
12329874,
12329875,
12329876,
12329877,
12329880,
12329881,
12329882,
12329883,
12329884,
12329885,
12329886,
12329887,
12329888,
12329889,
12329890,
12329934,
12329935,
12329936,
12329937,
12329938,
12329939,
12329940,
12329941,
12329942,
12329943,
12329944,
12330648,
12330655,
12330662,
12330669,
12330670,
12330671,
12330983,
12330984,
12330992,
12330993,
12330994,
12330999,
12331000,
12331008,
12331009,
12331010,
12331011,
12335153,
12335154,
12335155';	

   REM01.SP_EXT_REENVIO_GASTO ( V_PAR , V_USUARIOMODIFICAR, V_RET );

-----------------------------------------------------------------------------------------------------------------

   DBMS_OUTPUT.PUT_LINE( V_RET );
   DBMS_OUTPUT.PUT_LINE(' [INFO] Reenviado gastos ');
   DBMS_OUTPUT.PUT_LINE('[FIN] ');
    
   COMMIT;

EXCEPTION
   WHEN OTHERS THEN
        ERR_NUM := SQLCODE;
        ERR_MSG := SQLERRM;
        DBMS_OUTPUT.put_line('[ERROR] Se ha producido un error en la ejecución:'||TO_CHAR(ERR_NUM));
        DBMS_OUTPUT.put_line('-----------------------------------------------------------'); 
        DBMS_OUTPUT.put_line(ERR_MSG);
        ROLLBACK;
        RAISE;   
END;
/
EXIT;