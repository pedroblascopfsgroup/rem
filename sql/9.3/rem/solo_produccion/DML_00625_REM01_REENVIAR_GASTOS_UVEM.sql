--/*
--#########################################
--## AUTOR=Viorel Remus Ovidiu
--## FECHA_CREACION=20210120
--## ARTEFACTO=batch
--## VERSION_ARTEFACTO=9.3
--## INCIDENCIA_LINK=REMVIP-8732
--## PRODUCTO=NO
--## 
--## Finalidad: 
--##			
--## INSTRUCCIONES:  
--## VERSIONES:
--##        0.1 Versión inicial
--#########################################
--*/

--Para permitir la visualización de texto en un bloque PL/SQL utilizando DBMS_OUTPUT.PUT_LINE

WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET SERVEROUTPUT ON;
SET DEFINE OFF;

DECLARE
   ERR_NUM NUMBER(25);  -- Vble. auxiliar para registrar errores en el script.
   ERR_MSG VARCHAR2(1024 CHAR); -- Vble. auxiliar para registrar errores en el script.
   V_ESQUEMA VARCHAR2(25 CHAR):= '#ESQUEMA#'; -- Configuracion Esquema
   V_ESQUEMA_M VARCHAR2(25 CHAR):= '#ESQUEMA_MASTER#'; -- Configuracion Esquema Master
   V_USUARIOMODIFICAR VARCHAR(100 CHAR):= 'REMVIP-8732';
   V_SQL VARCHAR2(4000 CHAR);	
   V_PAR VARCHAR( 1024 CHAR );
   V_RET VARCHAR( 1024 CHAR );  
  
BEGIN
  
   DBMS_OUTPUT.put_line('[INICIO]');

-----------------------------------------------------------------------------------------------------------------      

   V_PAR := '12442625,
12583508,
12583509,
12583510,
12583511,
12583512,
12583513,
12583514,
12583515,
12583516,
12583517,
12583518,
12583519,
12583520,
12583521,
12583522,
12583523,
12583524,
12583525,
12583526,
12583527,
12583528,
12583529,
12583530,
12583531,
12583532,
12583533,
12583534,
12583535,
12583536,
12583537,
12583538,
12583539,
12583540,
12583541,
12583542,
12583543,
12583544,
12583545,
12583546,
12583547,
12583548,
12583549,
12583550,
12583551,
12583552,
12583553,
12583554,
12583555,
12583556,
12583557,
12583558,
12583559,
12583560,
12583561,
12583562,
12583563,
12583564,
12583565,
12583566,
12583567,
12583568,
12583569,
12583570,
12583571,
12583572,
12583573,
12583574,
12583575,
12583576,
12583577,
12583578,
12583579,
12583580,
12583581,
12583582,
12583583,
12583585,
12583586,
12583587,
12583588,
12583589';	

   REM01.SP_EXT_REENVIO_GASTO ( V_PAR , V_USUARIOMODIFICAR, V_RET );

-----------------------------------------------------------------------------------------------------------------

   DBMS_OUTPUT.PUT_LINE( V_RET );
   DBMS_OUTPUT.PUT_LINE(' [INFO] Reenviado gastos ');
   DBMS_OUTPUT.PUT_LINE('[FIN] ');
  
   V_PAR := '12583590,
12442637,
12546082,
12580490,
12583160,
12583161,
12583162,
12583163,
12583164,
12583165,
12583169,
12583498,
12583499,
12583500,
12583501,
12583502,
12583503,
12583504,
12583505,
12583506,
12583507,
12583591,
12583592,
12583593,
12583594,
12583595,
12583596,
12583597,
12583598,
12583599,
12583600,
12583601,
12583602,
12583603,
12583604,
12583605,
12583606,
12583610,
12584246,
12584247,
12584248,
12584249,
12584250,
12584251,
12584252,
12584253,
12584254,
12584255,
12584256,
12584257,
12584258,
12584259,
12584262,
12584263,
12584264,
12584362,
12584363,
12584364,
12584481,
12584849,
12584851,
12584852,
12584885,
12584886,
12584887,
12584888,
12584889,
12584890,
12584891,
12584892,
12584964';

 REM01.SP_EXT_REENVIO_GASTO ( V_PAR , V_USUARIOMODIFICAR, V_RET );

-----------------------------------------------------------------------------------------------------------------

   DBMS_OUTPUT.PUT_LINE( V_RET );
   DBMS_OUTPUT.PUT_LINE(' [INFO] Reenviado gastos ');
   DBMS_OUTPUT.PUT_LINE('[FIN] ');
    
   COMMIT;

EXCEPTION
   WHEN OTHERS THEN
        ERR_NUM := SQLCODE;
        ERR_MSG := SQLERRM;
        DBMS_OUTPUT.put_line('[ERROR] Se ha producido un error en la ejecución:'||TO_CHAR(ERR_NUM));
        DBMS_OUTPUT.put_line('-----------------------------------------------------------'); 
        DBMS_OUTPUT.put_line(ERR_MSG);
        ROLLBACK;
        RAISE;   
END;
/
EXIT;
