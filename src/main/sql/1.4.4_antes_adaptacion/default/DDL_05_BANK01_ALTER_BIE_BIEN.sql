

ALTER TABLE BANK01.DD_SPO_SITUACION_POSESORIA
 DROP PRIMARY KEY CASCADE;
DROP TABLE BANK01.DD_SPO_SITUACION_POSESORIA CASCADE CONSTRAINTS;

CREATE TABLE BANK01.DD_SPO_SITUACION_POSESORIA
(
  DD_SPO_ID                 NUMBER(16)          NOT NULL,
  DD_SPO_CODIGO             VARCHAR2(10 CHAR)   NOT NULL,
  DD_SPO_DESCRIPCION        VARCHAR2(50 CHAR)   NOT NULL,
  DD_SPO_DESCRIPCION_LARGA  VARCHAR2(200 CHAR)  NOT NULL,
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL
)
TABLESPACE BANK01
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX BANK01.PK_DD_SPO_SITUACION_POSESORIA ON BANK01.DD_SPO_SITUACION_POSESORIA
(DD_SPO_ID)
LOGGING
TABLESPACE BANK01
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE BANK01.DD_SPO_SITUACION_POSESORIA ADD (
  CONSTRAINT PK_DD_SPO_SITUACION_POSESORIA
 PRIMARY KEY
 (DD_SPO_ID)
    USING INDEX 
    TABLESPACE BANK01
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));
               
               
INSERT INTO BANK01.DD_SPO_SITUACION_POSESORIA
(
  DD_SPO_ID,
  DD_SPO_CODIGO,
  DD_SPO_DESCRIPCION,
  DD_SPO_DESCRIPCION_LARGA,
  USUARIOCREAR,
  FECHACREAR,
  BORRADO  
)  VALUES (1,'PRO','PROPIETARIO','PROPIETARIO','DGG',sysdate,0);



ALTER TABLE BANK01.DD_TRA_TASADORA
 DROP PRIMARY KEY CASCADE;
DROP TABLE BANK01.DD_TRA_TASADORA CASCADE CONSTRAINTS;

CREATE TABLE BANK01.DD_TRA_TASADORA
(
  DD_TRA_ID                 NUMBER(16)          NOT NULL,
  DD_TRA_CODIGO             VARCHAR2(10 CHAR)   NOT NULL,
  DD_TRA_DESCRIPCION        VARCHAR2(50 CHAR)   NOT NULL,
  DD_TRA_DESCRIPCION_LARGA  VARCHAR2(200 CHAR)  NOT NULL,
  VERSION                   INTEGER             DEFAULT 0                     NOT NULL,
  USUARIOCREAR              VARCHAR2(10 CHAR)   NOT NULL,
  FECHACREAR                TIMESTAMP(6)        NOT NULL,
  USUARIOMODIFICAR          VARCHAR2(10 CHAR),
  FECHAMODIFICAR            TIMESTAMP(6),
  USUARIOBORRAR             VARCHAR2(10 CHAR),
  FECHABORRAR               TIMESTAMP(6),
  BORRADO                   NUMBER(1)           DEFAULT 0                     NOT NULL
)
TABLESPACE BANK01
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX BANK01.PK_DD_TRA_TASADORA ON BANK01.DD_TRA_TASADORA
(DD_TRA_ID)
LOGGING
TABLESPACE BANK01
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE BANK01.DD_TRA_TASADORA ADD (
  CONSTRAINT PK_DD_TRA_TASADORA
 PRIMARY KEY
 (DD_TRA_ID)
    USING INDEX 
    TABLESPACE BANK01
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));
               
               
INSERT INTO BANK01.DD_TRA_TASADORA
(
  DD_TRA_ID,
  DD_TRA_CODIGO,
  DD_TRA_DESCRIPCION,
  DD_TRA_DESCRIPCION_LARGA,
  USUARIOCREAR,
  FECHACREAR,
  BORRADO  
)  VALUES (1,'TIN','TINSA','TINSA','DGG',sysdate,0);


ALTER TABLE BIE_BIEN ADD (
 
    DD_SPO_ID NUMBER(16),
    BIE_VIVIENDA_HABITUAL NUMBER(1),
    BIE_NUMERO_ACTIVO  VARCHAR2(50),
    BIE_LICENCIA_PRI_OCUPACION VARCHAR2(50),
    BIE_PRIMERA_TRANSMISION VARCHAR2(50),
    BIE_CONTRATO_ALQUILER VARCHAR2(150)
 
);

ALTER TABLE BANK01.BIE_BIEN ADD (
 CONSTRAINT FK_BIE_SPO 
 FOREIGN KEY (DD_SPO_ID) 
 REFERENCES BANK01.DD_SPO_SITUACION_POSESORIA (DD_SPO_ID)
 );
 
 
 
ALTER TABLE BIE_VALORACIONES ADD (
 
    
    BIE_RESPUESTA_CONSULTA VARCHAR2(250),
    BIE_VALOR_TASACION_EXT  NUMBER(16,2),
    BIE_F_TAS_EXTERNA       DATE,
    DD_TRA_ID NUMBER(16),
    BIE_F_SOL_TASACION DATE
 
); 
 
 
 
ALTER TABLE BANK01.BIE_VALORACIONES ADD (

 CONSTRAINT FK_BIE_VAL_TRA
 FOREIGN KEY (DD_TRA_ID) 
 REFERENCES BANK01.DD_TRA_TASADORA (DD_TRA_ID)
 );