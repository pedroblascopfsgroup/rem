<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <input name="output" type="java.lang.String" />

	<decision-state id="PdfOrXls">
		<if test="output=='pdf'" then="vistaPDF" else="vistaXLS" />
	</decision-state>

	<action-state id="vistaPDF">
			<!-- Elegimos el reporte optimizado para PDF -->
			<set name="flowScope.view" value="'reportSimulacion/simulacionAlertasPDF'" />
			<transition to="simulacion" />
	</action-state>

	<action-state id="vistaXLS">
			<!-- Elegimos el reporte optimizado para Excel -->
			<set name="flowScope.view" value="'reportSimulacion/simulacionAlertasXLS'" />
			<transition to="simulacion" />
	</action-state>

	<!--  Como el view es un servlet, aquí se procesa la lógica mediante llamadas a los managers  -->
    <end-state id="simulacion" view="${view}" />

</flow>
