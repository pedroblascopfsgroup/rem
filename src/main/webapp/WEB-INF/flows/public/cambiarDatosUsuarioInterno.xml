<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
    
    <var name="dtoUsuario" class="es.capgemini.pfs.users.dto.DtoUsuario" />
    <input name="username" type="java.lang.String" />
    <input name="passExpired" type="java.lang.Boolean" />

    <view-state id="vista" view="main/cambiarDatosUsuarioInterno" model="dtoUsuario">
        <on-entry>
            <evaluate expression="executor.execute('usuarioManager.getByUsername', username)" result="flowScope.usuario"/>
        </on-entry>
        <transition on="update" to="update" />
        <transition on="cancel" to="close" bind="false"/>
    </view-state>
  
  
    <action-state id="update">
        <evaluate expression="executor.execute('usuarioManager.guardarUsuarioInterno', dtoUsuario)" /> 
        <transition to="close"></transition>
    </action-state>
  
    <end-state id="close" view="default" />
  
</flow>