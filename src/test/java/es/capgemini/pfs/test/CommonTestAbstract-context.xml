<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
                        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd"
    default-autowire="no">
    

	<!-- Imports -->
    <import resource="classpath:devon/resources/core/ac-devon-core.xml" /> 
    <import resource="classpath:devon/resources/core/ac-devon-test-data-access.xml" />
    <import resource="classpath:ac-rec-common-data-access.xml" />
    <import resource="classpath:devon/resources/core/ac-devon-scheduling.xml" />
    <import resource="classpath:devon/resources/core/ac-devon-integration.xml" />
    <import resource="classpath:ac-rec-common-utils.xml" />
    <import resource="classpath:ac-rec-common-job.xml" />
    
    <bean id="common.appProperties" abstract="true" class="es.capgemini.devon.utils.RecursivePropertiesFactoryBean"
          p:ignoreUnresolvablePlaceholders="true" p:order="10" lazy-init="false" p:ignoreResourceNotFound="true"
          p:systemPropertiesModeName="SYSTEM_PROPERTIES_MODE_OVERRIDE" p:localOverride="true">
        <property name="locations">
            <list>
                <value>classpath:default.properties</value>
                <value>classpath:properties/*.properties</value>
                <value>classpath:app.properties</value>
                <value>classpath:cache.properties</value>
                <value>classpath:jdbc.properties</value>
                <value>classpath:app.test.properties</value>
                <value>classpath:jdbc.test.properties</value>
                <value>file:/${DEVON_HOME}/devon.test.properties</value>
            </list>
        </property>      
    </bean>


    
    
    <alias name="masterTransactionManager" alias="transactionManager" />
           
    <!-- Sobreescribir el Entity Datasource para no utilizar jndi -->
  <bean name="entityDataSourceManager" class="es.capgemini.pfs.dsm.DataSourceManager" lazy-init="false" init-method="initialize">
    <property name="flagTable" value="${entity.flagtable}" />
    <property name="initScripts" value="${entity.initScripts}" />
    <property name="destroyScripts" value="${entity.destroyScripts}" />
    <property name="allwaysInitialize" value="${entity.allwaysInitialize}" />
    <property name="preferJNDI" value="false" />
  </bean>
  
    <bean id="master.internalDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
                p:driverClassName="${master.jdbc.driverClassName}" p:url="${master.jdbc.url}"
                p:username="${master.jdbc.username}" p:password="${master.jdbc.password}" />
                
</beans>