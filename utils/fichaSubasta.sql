
drop table BIE_SUI_SUBASTA_INSTRUCCIONES;
drop table DD_TPS_SUBASTA;

INSERT INTO UNMASTER.DD_TDE_TIPO_DESPACHO (DD_TDE_ID, DD_TDE_CODIGO, DD_TDE_DESCRIPCION, DD_TDE_DESCRIPCION_LARGA, USUARIOCREAR, FECHACREAR)
VALUES (UNMASTER.S_DD_TDE_TIPO_DESPACHO.NEXTVAL, 'NOT', 'Despacho Notarios', 'Despacho Notarios', 'DD', sysdate);

INSERT INTO UN001.DES_DESPACHO_EXTERNO (DES_ID, DES_DESPACHO, USUARIOCREAR, FECHACREAR, ZON_ID, DD_TDE_ID)
VALUES (UN001.S_DES_DESPACHO_EXTERNO.NEXTVAL, 'Despacho Notarios', 'SAG', sysdate, 1, (SELECT DD_TDE_ID FROM UNMASTER.DD_TDE_TIPO_DESPACHO WHERE DD_TDE_CODIGO = 'NOT'));

INSERT INTO UNMASTER.DD_TGE_TIPO_GESTOR (DD_TGE_ID, DD_TGE_CODIGO, DD_TGE_DESCRIPCION, DD_TGE_DESCRIPCION_LARGA, USUARIOCREAR, FECHACREAR)
VALUES (5, 'NOT', 'Notario', 'Notario', 'DD', sysdate);

CREATE TABLE DD_TPS_SUBASTA (
  DD_TPS_ID				   NUMBER(16)           NOT NULL,
  DD_TPS_CODIGO			   VARCHAR2(10 CHAR)    NOT NULL,
  DD_TPS_DESCRIPCION	   VARCHAR2(50 CHAR)    NOT NULL,
  DD_TPS_DESCRIPCION_LARGA VARCHAR2(200 CHAR)   NOT NULL,
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_DD_TPS_SUBASTA PRIMARY KEY (DD_TPS_ID)
);

CREATE SEQUENCE S_DD_TPS_SUBASTA;

INSERT INTO DD_TPS_SUBASTA (DD_TPS_ID, DD_TPS_CODIGO, DD_TPS_DESCRIPCION, DD_TPS_DESCRIPCION_LARGA, USUARIOCREAR, FECHACREAR)
VALUES (S_DD_TPS_SUBASTA.NEXTVAL, '01', 'Notarial', 'Notarial', 'DD', sysdate);

INSERT INTO DD_TPS_SUBASTA (DD_TPS_ID, DD_TPS_CODIGO, DD_TPS_DESCRIPCION, DD_TPS_DESCRIPCION_LARGA, USUARIOCREAR, FECHACREAR)
VALUES (S_DD_TPS_SUBASTA.NEXTVAL, '02', 'Apremio', 'Apremio', 'DD', sysdate);

CREATE TABLE BIE_SUI_SUBASTA_INSTRUCCIONES
(
  SUI_ID                   NUMBER(16)           NOT NULL,
  BIE_ID               	   NUMBER(16)           NOT NULL,
  PRC_ID               	   NUMBER(16)           NOT NULL,
  DD_TPS_ID		   		   NUMBER(16)           NOT NULL,
  SUI_PRIMERA_SUBASTA	   TIMESTAMP(6),
  SUI_SEGUNDA_SUBASTA	   TIMESTAMP(6),
  SUI_TERCERA_SUBASTA	   TIMESTAMP(6),
  SUI_NOTARIO_USU_ID	   NUMBER(16),
  SUI_VALOR_SUBASTA		   NUMBER(16,2),
  SUI_TOTAL_DEUDA		   NUMBER(16,2),
  SUI_PRINCIPAL			   NUMBER(16,2),
  SUI_CARGAS_ANTERIORES	   NUMBER(16,2),
  SUI_PERITACION_ACTUAL	   NUMBER(16,2),
  SUI_TIPO_SEG_SUBASTA 	   NUMBER(16,2),
  SUI_IMPORTE_SEG_SUBASTA  NUMBER(16,2),
  SUI_TIPO_TER_SUBASTA     NUMBER(16,2),
  SUI_IMPORTE_TER_SUBASTA  NUMBER(16,2),
  SUI_RESP_CAPITAL		   NUMBER(16,2),
  SUI_RESP_INTERESES	   NUMBER(16,2),
  SUI_RESP_DEMORAS		   NUMBER(16,2),
  SUI_RESP_COSTAS		   NUMBER(16,2),
  SUI_PROP_CAPITAL		   NUMBER(16,2),
  SUI_PROP_INTERESES	   NUMBER(16,2),
  SUI_PROP_DEMORAS		   NUMBER(16,2),
  SUI_PROP_COSTAS		   NUMBER(16,2),
  SUI_FECHA_INSCRIPCION    TIMESTAMP(6),
  SUI_FECHA_LLAVES    	   TIMESTAMP(6),
  
  SUI_COSTAS_PROCURADOR    NUMBER(16,2),
  SUI_COSTAS_LETRADO       NUMBER(16,2),
  SUI_LIMITE_CON_POSTORES  NUMBER(16,2),
  DD_PS2_ID				   NUMBER(16),
  
  SUI_OBSERVACIONES		   VARCHAR2(2000 CHAR),
  VERSION                  INTEGER              DEFAULT 0                     NOT NULL,
  USUARIOCREAR             VARCHAR2(10 CHAR)    NOT NULL,
  FECHACREAR               TIMESTAMP(6)         NOT NULL,
  USUARIOMODIFICAR         VARCHAR2(10 CHAR),
  FECHAMODIFICAR           TIMESTAMP(6),
  USUARIOBORRAR            VARCHAR2(10 CHAR),
  FECHABORRAR              TIMESTAMP(6),
  BORRADO                  NUMBER(1)            DEFAULT 0                     NOT NULL,
  CONSTRAINT PK_BIE_SUI PRIMARY KEY (SUI_ID)
);

ALTER TABLE BIE_SUI_SUBASTA_INSTRUCCIONES
   ADD CONSTRAINT FK_TIPO_SUBASTA_INSTRUC FOREIGN KEY (DD_TPS_ID)
      REFERENCES DD_TPS_SUBASTA (DD_TPS_ID);
      
ALTER TABLE BIE_SUI_SUBASTA_INSTRUCCIONES
   ADD CONSTRAINT FK_BIE_BIENES_SUBASTA_INSTRUC FOREIGN KEY (BIE_ID)
      REFERENCES BIE_BIEN (BIE_ID);

ALTER TABLE BIE_SUI_SUBASTA_INSTRUCCIONES
   ADD CONSTRAINT FK_PRC_SUBASTA_INSTRUC FOREIGN KEY (PRC_ID)
      REFERENCES PRC_PROCEDIMIENTOS (PRC_ID);

ALTER TABLE BIE_SUI_SUBASTA_INSTRUCCIONES
   ADD CONSTRAINT FK_POSTORES_SUBASTA_INSTRUC FOREIGN KEY (DD_PS2_ID)
      REFERENCES UNMASTER.DD_PS2_POSTORES2 (DD_PS2_ID);
      
CREATE SEQUENCE S_BIE_SUI_SUBASTA_INSTRUCS;
